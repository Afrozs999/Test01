<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Star Shop - Zabardast Cheezein, Behtareen Daam</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<style>
/* ============================================================ RESET */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:#0D0D0D;color:#F5F0E8;overflow-x:hidden;-webkit-font-smoothing:antialiased}
img{display:block;max-width:100%}
button{font-family:inherit;cursor:pointer}
a{text-decoration:none;color:inherit}
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-thumb{background:rgba(212,168,67,.3);border-radius:10px}

/* ============================================================ VARS */
:root{
  --gold:#D4A843;--gold2:#F0C96A;
  --deep:#0D0D0D;--surf:#141414;--card:#1E1E1E;--card2:#252525;
  --text:#F5F0E8;--muted:#888;--red:#E63946;--green:#25D366;
  --r:14px;--ease:cubic-bezier(.4,0,.2,1);
}

/* ============================================================ NAV */
.nav{
  position:fixed;top:0;left:0;right:0;z-index:500;
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 6%;
  background:rgba(13,13,13,.92);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(212,168,67,.12);
}
.nav-logo{font-family:'Playfair Display',serif;font-size:1.55rem;font-weight:900;color:var(--gold)}
.nav-logo span{color:var(--text)}
.nav-cart{
  position:relative;background:var(--gold);border:none;border-radius:50%;
  width:46px;height:46px;display:flex;align-items:center;justify-content:center;
  font-size:1.2rem;color:var(--deep);
  box-shadow:0 4px 20px rgba(212,168,67,.35);
  transition:transform .2s var(--ease),box-shadow .2s;
}
.nav-cart:hover{transform:scale(1.1);box-shadow:0 6px 28px rgba(212,168,67,.55)}
.nav-cart:active{transform:scale(.95)}
.cart-badge{
  position:absolute;top:-5px;right:-5px;
  background:var(--red);color:#fff;
  border-radius:50%;min-width:20px;height:20px;
  font-size:.65rem;font-weight:700;
  display:flex;align-items:center;justify-content:center;
  border:2px solid var(--deep);
  opacity:0;transform:scale(0);
  transition:opacity .2s,transform .2s;pointer-events:none;
}
.cart-badge.show{opacity:1;transform:scale(1)}

/* ============================================================ HERO */
.hero{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;overflow:hidden}
.hero-bg{position:absolute;inset:0;background:url('https://i.ibb.co/xK4LnhHL/360-Banner1-11zon.jpg') center/cover no-repeat;animation:kenBurns 14s ease-in-out infinite alternate;will-change:transform}
@keyframes kenBurns{from{transform:scale(1) translate(0,0)}to{transform:scale(1.1) translate(-1%,1%)}}
.hero-overlay{position:absolute;inset:0;background:linear-gradient(160deg,rgba(0,0,0,.6) 0%,rgba(0,0,0,.2) 50%,rgba(13,13,13,.98) 100%)}
.hero-content{position:relative;z-index:1;padding:100px 24px 60px;animation:fadeUp 1.1s var(--ease) both}
@keyframes fadeUp{from{opacity:0;transform:translateY(36px)}to{opacity:1;transform:translateY(0)}}
.hero-pill{display:inline-flex;align-items:center;gap:6px;background:rgba(212,168,67,.12);border:1px solid rgba(212,168,67,.4);color:var(--gold2);padding:7px 22px;border-radius:50px;font-size:.75rem;letter-spacing:2.5px;text-transform:uppercase;margin-bottom:22px}
.hero h1{font-family:'Playfair Display',serif;font-size:clamp(3rem,10vw,7rem);font-weight:900;line-height:1.02;text-shadow:0 4px 40px rgba(0,0,0,.6);margin-bottom:16px}
.hero h1 em{color:var(--gold);font-style:normal}
.hero-sub{font-size:clamp(1rem,2.8vw,1.35rem);color:rgba(245,240,232,.72);margin-bottom:40px}
.hero-cta{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--deep);padding:16px 48px;border-radius:50px;font-weight:700;font-size:1rem;box-shadow:0 8px 36px rgba(212,168,67,.4);transition:transform .22s,box-shadow .22s;border:none}
.hero-cta:hover{transform:translateY(-3px);box-shadow:0 14px 48px rgba(212,168,67,.58)}

/* ============================================================ PRODUCTS SECTION */
#products{padding:90px 6% 70px}
.sec-header{text-align:center;margin-bottom:54px}
.sec-kicker{display:inline-block;color:var(--gold);font-size:.7rem;letter-spacing:3.5px;text-transform:uppercase;margin-bottom:14px}
.sec-header h2{font-family:'Playfair Display',serif;font-size:clamp(2rem,5vw,3.2rem);font-weight:900;margin-bottom:10px}
.sec-header p{color:var(--muted);font-size:.92rem}

/* Carousel */
.carousel-outer{position:relative}
.carousel-outer::before,.carousel-outer::after{content:'';position:absolute;top:0;bottom:0;width:60px;z-index:2;pointer-events:none}
.carousel-outer::before{left:0;background:linear-gradient(to right,#0D0D0D,transparent)}
.carousel-outer::after{right:0;background:linear-gradient(to left,#0D0D0D,transparent)}
.carousel{display:flex;gap:20px;overflow-x:auto;overflow-y:visible;scroll-snap-type:x mandatory;scrollbar-width:none;padding:10px 6px 16px;-webkit-overflow-scrolling:touch}
.carousel::-webkit-scrollbar{display:none}

/* Product Card */
.p-card{
  scroll-snap-align:start;flex:0 0 268px;
  background:var(--card);border-radius:var(--r);overflow:hidden;
  border:1px solid rgba(255,255,255,.06);
  transition:transform .32s var(--ease),box-shadow .32s;
  position:relative;
}
.p-card:hover{transform:translateY(-8px);box-shadow:0 24px 56px rgba(0,0,0,.6),0 0 0 1px rgba(212,168,67,.2)}
.p-img-wrap{overflow:hidden;aspect-ratio:1/1;background:#1a1a1a;position:relative;cursor:pointer}
.p-img{width:100%;height:100%;object-fit:cover;transition:transform .5s var(--ease)}
.p-card:hover .p-img{transform:scale(1.07)}
/* View overlay */
.p-view-overlay{
  position:absolute;inset:0;
  background:rgba(0,0,0,.45);
  display:flex;align-items:center;justify-content:center;
  opacity:0;transition:opacity .25s;
  font-size:.82rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;
  color:#fff;gap:7px;
}
.p-card:hover .p-view-overlay{opacity:1}
.p-info{padding:18px 18px 20px}
.p-name{font-family:'Playfair Display',serif;font-size:1.05rem;font-weight:700;margin-bottom:4px}
.p-short-desc{color:var(--muted);font-size:.78rem;margin-bottom:10px;line-height:1.5}
.p-price{color:var(--gold);font-weight:600;font-size:1rem;margin-bottom:16px}
.p-actions{display:flex;gap:8px}
.p-detail-btn{
  flex:1;background:transparent;border:1.5px solid rgba(255,255,255,.12);
  color:var(--text);padding:10px 8px;border-radius:9px;font-size:.8rem;font-weight:500;
  transition:all .2s;
}
.p-detail-btn:hover{border-color:var(--gold);color:var(--gold)}
.p-cart-btn{
  flex:2;background:transparent;border:1.5px solid rgba(212,168,67,.4);
  color:var(--gold);padding:10px 12px;border-radius:9px;font-size:.82rem;font-weight:600;
  transition:all .2s;position:relative;overflow:hidden;
}
.p-cart-btn::before{content:'';position:absolute;inset:0;background:var(--gold);transform:translateY(101%);transition:transform .25s var(--ease);z-index:0}
.p-cart-btn span{position:relative;z-index:1;transition:color .2s}
.p-cart-btn:hover::before{transform:translateY(0)}
.p-cart-btn:hover span{color:var(--deep)}
.p-cart-btn.in-cart{background:rgba(212,168,67,.12);border-color:var(--gold)}
.p-cart-btn.in-cart::before{display:none}
.in-cart-badge{
  position:absolute;top:10px;right:10px;
  background:var(--gold);color:var(--deep);
  font-size:.66rem;font-weight:700;padding:4px 10px;border-radius:20px;
  opacity:0;transform:scale(.7) translateY(-4px);
  transition:all .25s var(--ease);pointer-events:none;
}
.in-cart-badge.show{opacity:1;transform:scale(1) translateY(0)}

/* Carousel controls */
.carousel-controls{display:flex;align-items:center;justify-content:center;gap:14px;margin-top:26px}
.c-btn{background:var(--card);border:1px solid rgba(255,255,255,.1);color:var(--text);width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;transition:all .2s}
.c-btn:hover{background:var(--gold);color:var(--deep);border-color:var(--gold);transform:scale(1.08)}
.c-btn:disabled{opacity:.3;cursor:not-allowed}
.c-btn:disabled:hover{background:var(--card);color:var(--text);border-color:rgba(255,255,255,.1);transform:none}
.c-dots{display:flex;gap:6px}
.c-dot{width:7px;height:7px;border-radius:50%;background:rgba(255,255,255,.15);transition:all .3s;border:none}
.c-dot.active{background:var(--gold);width:24px;border-radius:4px}

/* ============================================================ PRODUCT MODAL */
.p-modal-overlay{
  position:fixed;inset:0;z-index:800;
  background:rgba(0,0,0,0);backdrop-filter:blur(0px);
  display:flex;align-items:center;justify-content:center;
  padding:20px;
  opacity:0;pointer-events:none;
  transition:opacity .3s var(--ease),backdrop-filter .3s;
}
.p-modal-overlay.open{
  opacity:1;pointer-events:all;
  background:rgba(0,0,0,.75);backdrop-filter:blur(8px);
}
.p-modal{
  background:var(--surf);border-radius:20px;
  width:100%;max-width:900px;max-height:90vh;
  overflow-y:auto;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 40px 100px rgba(0,0,0,.7);
  transform:scale(.92) translateY(24px);
  transition:transform .35s var(--ease);
  scrollbar-width:none;
}
.p-modal::-webkit-scrollbar{display:none}
.p-modal-overlay.open .p-modal{transform:scale(1) translateY(0)}

.p-modal-inner{display:grid;grid-template-columns:1fr 1fr;min-height:500px}

/* Modal Image Side */
.pm-left{position:relative;background:#111;border-radius:20px 0 0 20px;overflow:hidden}
.pm-img-main{
  width:100%;height:100%;min-height:400px;
  object-fit:cover;
  transition:transform .4s var(--ease);
  cursor:zoom-in;
}
.pm-img-main.zoomed{transform:scale(1.8);cursor:zoom-out;transform-origin:var(--ox,50%) var(--oy,50%)}

.pm-zoom-hint{
  position:absolute;bottom:14px;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,.55);color:rgba(255,255,255,.7);
  padding:5px 14px;border-radius:20px;font-size:.72rem;letter-spacing:1px;
  pointer-events:none;transition:opacity .3s;
}
.pm-img-main.zoomed ~ .pm-zoom-hint{opacity:0}

/* Thumbnails */
.pm-thumbs{
  position:absolute;bottom:14px;left:14px;right:14px;
  display:flex;gap:8px;justify-content:center;
}
.pm-thumb{
  width:52px;height:52px;border-radius:9px;object-fit:cover;
  border:2px solid transparent;cursor:pointer;
  transition:border-color .2s,transform .2s;background:#222;
  flex-shrink:0;
}
.pm-thumb:hover{transform:scale(1.08)}
.pm-thumb.active{border-color:var(--gold)}

/* Modal Info Side */
.pm-right{padding:32px 30px 30px;display:flex;flex-direction:column;gap:14px;position:relative}
.pm-close{
  position:absolute;top:18px;right:18px;
  background:rgba(255,255,255,.07);border:none;color:var(--muted);
  width:34px;height:34px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-size:1rem;
  transition:all .22s;
}
.pm-close:hover{background:rgba(255,255,255,.15);color:var(--text);transform:rotate(90deg)}

.pm-kicker{color:var(--gold);font-size:.7rem;letter-spacing:3px;text-transform:uppercase}
.pm-title{font-family:'Playfair Display',serif;font-size:1.7rem;font-weight:900;line-height:1.2;padding-right:40px}
.pm-price{color:var(--gold);font-size:1.5rem;font-weight:700}
.pm-divider{height:1px;background:rgba(255,255,255,.07);flex-shrink:0}
.pm-desc{color:rgba(245,240,232,.7);font-size:.88rem;line-height:1.7}

/* Size Selector */
.pm-label{font-size:.75rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:8px}
.pm-sizes{display:flex;gap:8px;flex-wrap:wrap}
.size-opt{
  background:var(--card);border:1.5px solid rgba(255,255,255,.1);
  color:var(--text);padding:7px 16px;border-radius:8px;
  font-size:.82rem;font-weight:500;transition:all .18s;
}
.size-opt:hover{border-color:var(--gold);color:var(--gold)}
.size-opt.selected{background:var(--gold);color:var(--deep);border-color:var(--gold);font-weight:700}
.size-opt.unavailable{opacity:.3;cursor:not-allowed;text-decoration:line-through}

/* Color Selector */
.pm-colors{display:flex;gap:10px;flex-wrap:wrap}
.color-opt{
  width:30px;height:30px;border-radius:50%;border:2px solid transparent;
  cursor:pointer;transition:transform .18s,border-color .18s;
  position:relative;
}
.color-opt:hover{transform:scale(1.18)}
.color-opt.selected{border-color:var(--gold);transform:scale(1.15)}
.color-opt::after{content:'';position:absolute;inset:-4px;border-radius:50%;border:1px solid rgba(255,255,255,.1)}

/* Quantity */
.pm-qty-wrap{display:flex;align-items:center;gap:10px}
.pm-qty-btn{background:var(--card2);border:none;color:var(--text);width:34px;height:34px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;transition:all .18s}
.pm-qty-btn:hover{background:var(--gold);color:var(--deep)}
.pm-qty-val{font-size:1rem;font-weight:700;min-width:32px;text-align:center}

/* Modal CTA */
.pm-cta{
  width:100%;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  border:none;color:var(--deep);
  padding:15px;border-radius:11px;
  font-weight:700;font-size:1rem;
  display:flex;align-items:center;justify-content:center;gap:8px;
  transition:transform .22s,box-shadow .22s;
  box-shadow:0 6px 26px rgba(212,168,67,.32);
}
.pm-cta:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(212,168,67,.52)}
.pm-cta:active{transform:translateY(0) scale(.98)}

/* Features list */
.pm-features{display:flex;flex-wrap:wrap;gap:8px}
.pm-feat-tag{background:var(--card);border:1px solid rgba(255,255,255,.07);color:var(--muted);padding:5px 12px;border-radius:20px;font-size:.75rem}

/* Related Products */
.pm-related{padding:24px 30px 30px;border-top:1px solid rgba(255,255,255,.07)}
.pm-related h4{font-family:'Playfair Display',serif;font-size:1.1rem;margin-bottom:16px;color:var(--gold)}
.related-grid{display:flex;gap:14px;overflow-x:auto;scrollbar-width:none;padding-bottom:4px}
.related-grid::-webkit-scrollbar{display:none}
.rel-card{
  flex:0 0 130px;background:var(--card);border-radius:11px;overflow:hidden;
  border:1px solid rgba(255,255,255,.06);cursor:pointer;
  transition:transform .25s,box-shadow .25s;
}
.rel-card:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,.5),0 0 0 1px rgba(212,168,67,.2)}
.rel-img{width:100%;aspect-ratio:1/1;object-fit:cover;background:#1a1a1a}
.rel-info{padding:8px 10px}
.rel-name{font-size:.75rem;font-weight:600;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.rel-price{font-size:.72rem;color:var(--gold);font-weight:600}

/* ============================================================ FEATURES */
.features{padding:52px 6%;background:linear-gradient(135deg,rgba(212,168,67,.07),rgba(212,168,67,.02));border-top:1px solid rgba(212,168,67,.12);border-bottom:1px solid rgba(212,168,67,.12);display:flex;flex-wrap:wrap;gap:28px;justify-content:center}
.feat{flex:1 1 180px;max-width:200px;text-align:center;transition:transform .25s}
.feat:hover{transform:translateY(-4px)}
.feat-icon{font-size:2.2rem;margin-bottom:12px}
.feat h4{font-family:'Playfair Display',serif;font-size:.98rem;margin-bottom:5px}
.feat p{color:var(--muted);font-size:.8rem;line-height:1.55}

/* ============================================================ FOOTER */
footer{text-align:center;padding:46px 20px;border-top:1px solid rgba(255,255,255,.06)}
.footer-logo{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:900;color:var(--gold);margin-bottom:12px}
footer p{color:var(--muted);font-size:.85rem;margin-bottom:6px}
footer a{color:var(--gold)}
footer a:hover{text-decoration:underline}

/* ============================================================ OVERLAY */
.overlay{position:fixed;inset:0;z-index:600;background:rgba(0,0,0,0);backdrop-filter:blur(0px);pointer-events:none;transition:background .35s,backdrop-filter .35s}
.overlay.open{background:rgba(0,0,0,.65);backdrop-filter:blur(4px);pointer-events:all}

/* ============================================================ CART DRAWER */
.cart-drawer{position:fixed;top:0;right:0;bottom:0;width:min(440px,100vw);background:var(--surf);border-left:1px solid rgba(255,255,255,.07);z-index:700;transform:translateX(102%);transition:transform .38s var(--ease);display:flex;flex-direction:column;overflow:hidden}
.cart-drawer.open{transform:translateX(0)}
.drawer-head{display:flex;align-items:center;justify-content:space-between;padding:22px 24px 18px;border-bottom:1px solid rgba(255,255,255,.07);flex-shrink:0;background:var(--surf)}
.drawer-title{font-family:'Playfair Display',serif;font-size:1.4rem;display:flex;align-items:center;gap:9px}
.drawer-close{background:rgba(255,255,255,.06);border:none;color:var(--muted);width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;transition:all .2s}
.drawer-close:hover{background:rgba(255,255,255,.14);color:var(--text);transform:rotate(90deg)}
.drawer-body{flex:1;overflow-y:auto;padding:20px 24px;display:flex;flex-direction:column;gap:14px}
.cart-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:60px 20px;text-align:center;color:var(--muted)}
.cart-empty-icon{font-size:3.5rem;opacity:.5}
.cart-empty h4{font-family:'Playfair Display',serif;font-size:1.1rem;color:var(--text)}
.empty-shop-btn{margin-top:8px;background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--deep);border:none;padding:11px 30px;border-radius:50px;font-weight:600;font-size:.9rem;transition:transform .2s,box-shadow .2s;box-shadow:0 4px 18px rgba(212,168,67,.3)}
.empty-shop-btn:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(212,168,67,.5)}
.cart-item{display:flex;align-items:center;gap:12px;background:var(--card2);border-radius:var(--r);padding:12px;border:1px solid rgba(255,255,255,.05);animation:itemIn .28s var(--ease) both}
@keyframes itemIn{from{opacity:0;transform:translateX(16px)}to{opacity:1;transform:translateX(0)}}
.ci-img{width:62px;height:62px;border-radius:9px;object-fit:cover;background:#222;flex-shrink:0}
.ci-body{flex:1;min-width:0}
.ci-name{font-weight:600;font-size:.88rem;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ci-meta{color:var(--muted);font-size:.72rem;margin-bottom:6px}
.ci-unit{color:var(--gold);font-size:.78rem;margin-bottom:7px}
.ci-controls{display:flex;align-items:center;gap:8px}
.ci-q-btn{background:rgba(255,255,255,.07);border:none;color:var(--text);width:28px;height:28px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;font-weight:700;transition:all .18s}
.ci-q-btn:hover{background:var(--gold);color:var(--deep)}
.ci-qty-val{font-size:.9rem;font-weight:700;min-width:22px;text-align:center}
.ci-sub{color:rgba(245,240,232,.5);font-size:.78rem;margin-left:auto;flex-shrink:0}
.ci-del{background:none;border:none;color:#c05050;padding:5px;border-radius:7px;font-size:.9rem;transition:all .18s;flex-shrink:0}
.ci-del:hover{background:rgba(224,96,96,.12);color:#e06060}
.drawer-foot{padding:16px 24px 24px;flex-shrink:0;border-top:1px solid rgba(255,255,255,.07);display:flex;flex-direction:column;gap:12px;background:var(--surf)}
.cart-total-row{display:flex;justify-content:space-between;align-items:center;background:var(--card);border-radius:10px;padding:14px 16px;border:1px solid rgba(212,168,67,.15)}
.cart-total-row span{color:var(--muted);font-size:.88rem}
.cart-total-row strong{color:var(--gold);font-size:1.28rem;font-weight:700}
.order-form{display:flex;flex-direction:column;gap:10px}
.form-section-title{font-family:'Playfair Display',serif;font-size:1rem;padding-bottom:9px;border-bottom:1px solid rgba(255,255,255,.07);margin-bottom:2px}
.inp{width:100%;background:var(--card);border:1.5px solid rgba(255,255,255,.09);color:var(--text);border-radius:9px;padding:12px 14px;font-family:'DM Sans',sans-serif;font-size:.9rem;outline:none;transition:border-color .2s,background .2s}
.inp:focus{border-color:var(--gold);background:#222}
.inp::placeholder{color:#555}
textarea.inp{resize:vertical;min-height:68px}
.inp.error{border-color:#e06060}
.send-btn{width:100%;background:linear-gradient(135deg,var(--gold),var(--gold2));border:none;color:var(--deep);padding:15px;border-radius:10px;font-weight:700;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:9px;transition:transform .22s,box-shadow .22s,opacity .2s;box-shadow:0 6px 26px rgba(212,168,67,.32)}
.send-btn:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(212,168,67,.52)}
.send-btn:active{transform:translateY(0) scale(.98)}
.send-btn:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}

/* ============================================================ WHATSAPP */
.wa{position:fixed;bottom:26px;right:26px;z-index:600;background:var(--green);color:#fff;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 28px rgba(37,211,102,.45);transition:transform .22s,box-shadow .22s;animation:waPop .5s 1s var(--ease) both,waPulse 3s 1.5s ease-in-out infinite}
@keyframes waPop{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes waPulse{0%,100%{box-shadow:0 6px 28px rgba(37,211,102,.45)}50%{box-shadow:0 6px 44px rgba(37,211,102,.72)}}
.wa:hover{transform:scale(1.12);box-shadow:0 10px 40px rgba(37,211,102,.65);animation:none}
.wa-tip{position:absolute;right:72px;top:50%;transform:translateY(-50%) translateX(6px);background:var(--card2);color:var(--text);padding:7px 15px;border-radius:22px;font-size:.78rem;white-space:nowrap;border:1px solid rgba(255,255,255,.08);opacity:0;pointer-events:none;transition:all .22s;box-shadow:0 4px 18px rgba(0,0,0,.4)}
.wa:hover .wa-tip{opacity:1;transform:translateY(-50%) translateX(0)}

/* ============================================================ TOAST */
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(10px);background:var(--card2);color:var(--text);border:1px solid rgba(212,168,67,.28);padding:12px 28px;border-radius:50px;font-size:.86rem;z-index:9999;opacity:0;pointer-events:none;transition:opacity .28s,transform .28s;white-space:nowrap;box-shadow:0 8px 32px rgba(0,0,0,.45);max-width:90vw;overflow:hidden;text-overflow:ellipsis}
.toast.visible{opacity:1;transform:translateX(-50%) translateY(0)}

/* ============================================================ RESPONSIVE */
@media(max-width:768px){
  .p-modal-inner{grid-template-columns:1fr}
  .pm-left{border-radius:20px 20px 0 0;min-height:280px}
  .pm-img-main{min-height:280px}
  .pm-right{padding:24px 20px 20px}
}
@media(max-width:640px){
  .nav{padding:13px 4%}
  #products{padding:72px 4% 52px}
  .p-card{flex:0 0 248px}
  .features{padding:38px 4%}
  .drawer-body{padding:16px 18px}
  .drawer-foot{padding:14px 18px 20px}
  .pm-related{padding:20px 20px 24px}
}
</style>
</head>
<body>

<!-- ========== NAVBAR ========== -->
<nav class="nav">
  <span class="nav-logo">The <span>Star</span> &#9733;</span>
  <button class="nav-cart" id="cartOpenBtn">&#128722;<span class="cart-badge" id="cartBadge">0</span></button>
</nav>

<!-- ========== HERO ========== -->
<section class="hero" id="home">
  <div class="hero-bg"></div>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <div class="hero-pill">&#9733; Aapka Swagat Hai Hamare Store Mein</div>
    <h1>The <em>Star</em> Shop</h1>
    <p class="hero-sub">Zabardast Cheezein, Behtareen Daam</p>
    <button class="hero-cta" id="shopNowHero">Abhi Kharido &#8594;</button>
  </div>
</section>

<!-- ========== PRODUCTS ========== -->
<section id="products">
  <div class="sec-header">
    <div class="sec-kicker">&#9733; Hamare Products</div>
    <h2>Khaas Cheezein</h2>
    <p>Kisi bhi product pe click karo poori details dekhne ke liye</p>
  </div>
  <div class="carousel-outer">
    <div class="carousel" id="carousel">

      <div class="p-card"
        data-id="1" data-name="Star Mug"
        data-price="299" data-img="https://i.ibb.co/TxsfJcCD/Mug-Insta-Post-02.png"
        data-desc="Premium ceramic Star Mug — 350ml capacity, dishwasher safe, microwave friendly. Ek dum perfect gift ya apne liye bhi! Double-wall insulation se aapki chai/coffee zyada der tak garam rehti hai."
        data-sizes="One Size" data-colors="#1a1a1a,#ffffff,#D4A843"
        data-tags="Ceramic,350ml,Gift Ready,Dishwasher Safe">
        <div class="p-img-wrap">
          <img class="p-img" src="https://i.ibb.co/TxsfJcCD/Mug-Insta-Post-02.png" alt="Star Mug" loading="lazy">
          <div class="p-view-overlay">&#128269; Detail Dekho</div>
        </div>
        <div class="p-info">
          <div class="p-name">Star Mug</div>
          <div class="p-short-desc">Premium ceramic, 350ml, gift ready</div>
          <div class="p-price">&#8377;299</div>
          <div class="p-actions">
            <button class="p-detail-btn">&#128269; Details</button>
            <button class="p-cart-btn"><span>+ Cart</span></button>
          </div>
        </div>
        <div class="in-cart-badge">&#10003; Added</div>
      </div>

      <div class="p-card"
        data-id="2" data-name="Star Special"
        data-price="499" data-img="https://i.ibb.co/DPJGHDGv/STAR-1.png"
        data-desc="The Star Special — hamare store ka sabse popular item! Unique star design ke saath ek premium quality product. Har kisi ko gift karo — guaranteed smile milegi! Limited edition piece hai, jaldi lo!"
        data-sizes="One Size" data-colors="#D4A843,#c0c0c0,#E63946"
        data-tags="Limited Edition,Premium,Bestseller,Gift">
        <div class="p-img-wrap">
          <img class="p-img" src="https://i.ibb.co/DPJGHDGv/STAR-1.png" alt="Star Special" loading="lazy">
          <div class="p-view-overlay">&#128269; Detail Dekho</div>
        </div>
        <div class="p-info">
          <div class="p-name">Star Special</div>
          <div class="p-short-desc">Limited edition, bestseller item</div>
          <div class="p-price">&#8377;499</div>
          <div class="p-actions">
            <button class="p-detail-btn">&#128269; Details</button>
            <button class="p-cart-btn"><span>+ Cart</span></button>
          </div>
        </div>
        <div class="in-cart-badge">&#10003; Added</div>
      </div>

      <div class="p-card"
        data-id="3" data-name="Star T-Shirt"
        data-price="699" data-img="https://i.ibb.co/608FqBRf/Tshirt-Insta-Post-1.png"
        data-desc="Star T-Shirt — 100% premium cotton, ultra-soft feel. Unique Star Shop logo ke saath stylish design. Regular fit, breathable fabric. Ek dum perfect casual wear ya gift ke liye. Machine washable."
        data-sizes="S,M,L,XL,XXL" data-colors="#1a1a1a,#ffffff,#D4A843,#264653"
        data-tags="100% Cotton,Regular Fit,Machine Wash,Unisex">
        <div class="p-img-wrap">
          <img class="p-img" src="https://i.ibb.co/608FqBRf/Tshirt-Insta-Post-1.png" alt="Star T-Shirt" loading="lazy">
          <div class="p-view-overlay">&#128269; Detail Dekho</div>
        </div>
        <div class="p-info">
          <div class="p-name">Star T-Shirt</div>
          <div class="p-short-desc">100% cotton, premium quality, unisex</div>
          <div class="p-price">&#8377;699</div>
          <div class="p-actions">
            <button class="p-detail-btn">&#128269; Details</button>
            <button class="p-cart-btn"><span>+ Cart</span></button>
          </div>
        </div>
        <div class="in-cart-badge">&#10003; Added</div>
      </div>

      <div class="p-card"
        data-id="4" data-name="Star Mug Gift Box"
        data-price="399" data-img="https://i.ibb.co/TxsfJcCD/Mug-Insta-Post-02.png"
        data-desc="Star Mug Gift Box — wahi premium mug ab ek khoobsurat gift box mein! Birthday, anniversary, ya koi bhi occasion ke liye perfect. Box pe custom message bhi likh sakte hain. Ready to gift packaging!"
        data-sizes="One Size" data-colors="#D4A843,#c0c0c0"
        data-tags="Gift Box,Custom Message,Premium Packaging,Occasion Ready">
        <div class="p-img-wrap">
          <img class="p-img" src="https://i.ibb.co/TxsfJcCD/Mug-Insta-Post-02.png" alt="Star Mug Gift Box" loading="lazy">
          <div class="p-view-overlay">&#128269; Detail Dekho</div>
        </div>
        <div class="p-info">
          <div class="p-name">Star Mug (Gift Box)</div>
          <div class="p-short-desc">Gift box packaging, occasion ready</div>
          <div class="p-price">&#8377;399</div>
          <div class="p-actions">
            <button class="p-detail-btn">&#128269; Details</button>
            <button class="p-cart-btn"><span>+ Cart</span></button>
          </div>
        </div>
        <div class="in-cart-badge">&#10003; Added</div>
      </div>

      <div class="p-card"
        data-id="5" data-name="Star T-Shirt Premium"
        data-price="899" data-img="https://i.ibb.co/608FqBRf/Tshirt-Insta-Post-1.png"
        data-desc="Star T-Shirt Premium — hamare collection ka crown jewel! Extra-soft Egyptian cotton blend, premium embroidered logo, double-stitched seams for extra durability. Slim fit design. Ek baar pehno toh sab poochhenge!"
        data-sizes="S,M,L,XL,XXL" data-colors="#1a1a1a,#D4A843,#2d3436,#6c5ce7"
        data-tags="Egyptian Cotton,Embroidered,Slim Fit,Premium">
        <div class="p-img-wrap">
          <img class="p-img" src="https://i.ibb.co/608FqBRf/Tshirt-Insta-Post-1.png" alt="Star T-Shirt Premium" loading="lazy">
          <div class="p-view-overlay">&#128269; Detail Dekho</div>
        </div>
        <div class="p-info">
          <div class="p-name">Star T-Shirt (Premium)</div>
          <div class="p-short-desc">Egyptian cotton, embroidered logo, slim fit</div>
          <div class="p-price">&#8377;899</div>
          <div class="p-actions">
            <button class="p-detail-btn">&#128269; Details</button>
            <button class="p-cart-btn"><span>+ Cart</span></button>
          </div>
        </div>
        <div class="in-cart-badge">&#10003; Added</div>
      </div>

    </div>
    <div class="carousel-controls">
      <button class="c-btn" id="prevBtn">&#8592;</button>
      <div class="c-dots" id="cDots"></div>
      <button class="c-btn" id="nextBtn">&#8594;</button>
    </div>
  </div>
</section>

<!-- ========== FEATURES ========== -->
<div class="features">
  <div class="feat"><div class="feat-icon">&#9889;</div><h4>Jaldi Delivery</h4><p>Aapke Ghar Tak Fast aur Safe</p></div>
  <div class="feat"><div class="feat-icon">&#128142;</div><h4>Zabardast Quality</h4><p>Har Product Best Quality</p></div>
  <div class="feat"><div class="feat-icon">&#128172;</div><h4>Aasaan Support</h4><p>WhatsApp Pe Kabhi Bhi</p></div>
  <div class="feat"><div class="feat-icon">&#128274;</div><h4>Safe Order</h4><p>100% Secure Payment</p></div>
</div>

<!-- ========== FOOTER ========== -->
<footer>
  <div class="footer-logo">The Star &#9733; Shop</div>
  <p>Zabardast Cheezein, Behtareen Daam</p>
  <p>&#128231; <a href="mailto:afrozask143@gmail.com">afrozask143@gmail.com</a> &nbsp;&#183;&nbsp; &#128241; <a href="https://wa.me/919767450186" target="_blank">+91 97674 50186</a></p>
  <p style="margin-top:14px;font-size:.75rem;opacity:.4">&#169; 2024 The Star Shop &#183; Pyaar se Banaya Gaya &#9733;</p>
</footer>

<!-- ========== PRODUCT MODAL ========== -->
<div class="p-modal-overlay" id="productModal">
  <div class="p-modal" id="productModalBox">
    <div class="p-modal-inner">
      <!-- Left: Image -->
      <div class="pm-left">
        <img class="pm-img-main" id="pmMainImg" src="" alt="">
        <div class="pm-zoom-hint">&#128269; Click to Zoom</div>
        <div class="pm-thumbs" id="pmThumbs"></div>
      </div>
      <!-- Right: Info -->
      <div class="pm-right">
        <button class="pm-close" id="pmClose">&#10005;</button>
        <div class="pm-kicker">&#9733; The Star Shop</div>
        <div class="pm-title" id="pmTitle"></div>
        <div class="pm-price" id="pmPrice"></div>
        <div class="pm-divider"></div>
        <div class="pm-desc" id="pmDesc"></div>

        <!-- Sizes -->
        <div id="pmSizeWrap">
          <div class="pm-label">Size Chuno</div>
          <div class="pm-sizes" id="pmSizes"></div>
        </div>

        <!-- Colors -->
        <div>
          <div class="pm-label">Color Chuno</div>
          <div class="pm-colors" id="pmColors"></div>
        </div>

        <!-- Qty -->
        <div>
          <div class="pm-label">Quantity</div>
          <div class="pm-qty-wrap">
            <button class="pm-qty-btn" id="pmQtyDec">&#8722;</button>
            <span class="pm-qty-val" id="pmQtyVal">1</span>
            <button class="pm-qty-btn" id="pmQtyInc">+</button>
          </div>
        </div>

        <!-- Add to Cart CTA -->
        <button class="pm-cta" id="pmCartBtn">&#128722; Cart Mein Daalo</button>

        <!-- Feature Tags -->
        <div class="pm-features" id="pmTags"></div>
      </div>
    </div>
    <!-- Related Products -->
    <div class="pm-related">
      <h4>&#9733; Related Products</h4>
      <div class="related-grid" id="relatedGrid"></div>
    </div>
  </div>
</div>

<!-- ========== OVERLAY ========== -->
<div class="overlay" id="overlay"></div>

<!-- ========== CART DRAWER ========== -->
<div class="cart-drawer" id="cartDrawer">
  <div class="drawer-head">
    <div class="drawer-title">&#128722; Aapka Cart</div>
    <button class="drawer-close" id="cartCloseBtn">&#10005;</button>
  </div>
  <div class="drawer-body" id="drawerBody"></div>
  <div class="drawer-foot" id="drawerFoot" style="display:none">
    <div class="cart-total-row"><span>Kul Raqam</span><strong id="cartTotal">&#8377;0</strong></div>
    <div class="order-form">
      <div class="form-section-title">&#128230; Apna Order Complete Karo</div>
      <input class="inp" id="custName"  type="text"  placeholder="Aapka Naam *" autocomplete="name">
      <input class="inp" id="custPhone" type="tel"   placeholder="Phone Number *" autocomplete="tel">
      <input class="inp" id="custEmail" type="email" placeholder="Email (optional)" autocomplete="email">
      <textarea class="inp" id="custNote" placeholder="Koi khaas baat? (optional)" rows="2"></textarea>
      <button class="send-btn" id="sendBtn"><span id="sendBtnText">Order Bhejo &#9993;</span></button>
    </div>
  </div>
</div>

<!-- ========== WHATSAPP ========== -->
<a class="wa" href="https://wa.me/919767450186" target="_blank" rel="noopener">
  <svg viewBox="0 0 32 32" width="26" height="26" fill="white"><path d="M16 3C8.8 3 3 8.8 3 16c0 2.3.6 4.5 1.7 6.4L3 29l6.8-1.7C11.6 28.4 13.8 29 16 29c7.2 0 13-5.8 13-13S23.2 3 16 3zm6.8 18.4c-.3.8-1.5 1.5-2.1 1.6-.5.1-1.2.1-1.9-.1-.5-.1-1-.3-1.7-.6-3-1.3-4.9-4.3-5.1-4.5-.2-.2-1.4-1.9-1.4-3.6 0-1.7.9-2.5 1.2-2.8.3-.4.7-.4.9-.4h.7c.2 0 .5 0 .7.6.3.7 1 2.4 1.1 2.6.1.2.1.4 0 .6-.1.2-.2.3-.4.5-.2.2-.4.4-.5.5-.2.2-.4.4-.2.8.3.4 1.2 1.9 2.5 3 1.7 1.5 3.1 1.9 3.6 2.1.4.2.7.1.9-.1.3-.3.9-1 1.1-1.4.2-.3.5-.3.8-.2.3.1 2 .9 2.4 1.1.3.2.5.3.6.5.1.3 0 1.4-.4 2.2z"/></svg>
  <span class="wa-tip">WhatsApp Pe Baat Karo</span>
</a>

<!-- ========== TOAST ========== -->
<div class="toast" id="toast"></div>

<!-- ========== JS ========== -->
<script>
(function(){
'use strict';

/* ---- EmailJS ---- */
emailjs.init('uBMk2SDbmp13vRLc7');
var EJ_SVC='service_eebtph8', EJ_TPL='template_qtlj99j', EJ_MAIL='afrozask143@gmail.com';

/* ---- State ---- */
var cart=[];
var modalQty=1;
var selectedSize='';
var selectedColor='';
var currentModalId=null;

/* ===== HELPERS ===== */
var toastTimer;
function toast(msg,dur){
  var el=document.getElementById('toast');
  el.innerHTML=msg; el.classList.add('visible');
  clearTimeout(toastTimer);
  toastTimer=setTimeout(function(){el.classList.remove('visible');},dur||2800);
}

function syncBadge(){
  var n=cart.reduce(function(s,i){return s+i.qty;},0);
  var b=document.getElementById('cartBadge');
  b.textContent=n;
  n>0?b.classList.add('show'):b.classList.remove('show');
}

function bounceCartNav(){
  var b=document.getElementById('cartOpenBtn');
  b.style.transform='scale(1.3)';
  setTimeout(function(){b.style.transform='';},220);
}

function getAllCards(){return document.querySelectorAll('.p-card');}

function getCardData(card){
  return {
    id:card.dataset.id, name:card.dataset.name,
    price:parseInt(card.dataset.price,10), img:card.dataset.img,
    desc:card.dataset.desc, sizes:card.dataset.sizes,
    colors:card.dataset.colors, tags:card.dataset.tags
  };
}

/* ===== CART ===== */
function addToCartById(id,name,price,img,qty,size,color){
  qty=qty||1; size=size||''; color=color||'';
  var key=id+(size?'-'+size:'')+(color?'-'+color:'');
  var hit=cart.find(function(i){return i.key===key;});
  if(hit){hit.qty+=qty;}
  else{cart.push({key:key,id:id,name:name,price:price,img:img,qty:qty,size:size,color:color});}
  syncBadge(); bounceCartNav();
  /* Update card UI */
  getAllCards().forEach(function(c){
    if(c.dataset.id===id){
      var btn=c.querySelector('.p-cart-btn');
      var badge=c.querySelector('.in-cart-badge');
      if(btn){btn.classList.add('in-cart');btn.querySelector('span').innerHTML='&#10003; Cart Mein';}
      if(badge)badge.classList.add('show');
    }
  });
}

function removeFromCart(key){
  var item=cart.find(function(i){return i.key===key;});
  if(!item)return;
  var id=item.id;
  cart=cart.filter(function(i){return i.key!==key;});
  /* Check if any cart item still has this product id */
  var stillIn=cart.some(function(i){return i.id===id;});
  if(!stillIn){
    getAllCards().forEach(function(c){
      if(c.dataset.id===id){
        var btn=c.querySelector('.p-cart-btn');
        var badge=c.querySelector('.in-cart-badge');
        if(btn){btn.classList.remove('in-cart');btn.querySelector('span').innerHTML='+ Cart';}
        if(badge)badge.classList.remove('show');
      }
    });
  }
  syncBadge(); renderCartDrawer();
  toast('Item cart se hata diya &#128465;');
}

function renderCartDrawer(){
  var body=document.getElementById('drawerBody');
  var foot=document.getElementById('drawerFoot');
  if(!cart.length){
    foot.style.display='none';
    body.innerHTML='<div class="cart-empty">'+
      '<div class="cart-empty-icon">&#128717;</div>'+
      '<h4>Cart Abhi Khali Hai</h4>'+
      '<p>Products add karo aur order karo!</p>'+
      '<button class="empty-shop-btn" id="emptyShopBtn">Products Dekho &#8594;</button>'+
    '</div>';
    var esb=document.getElementById('emptyShopBtn');
    if(esb)esb.addEventListener('click',function(){closeCart();setTimeout(function(){document.getElementById('products').scrollIntoView({behavior:'smooth'});},300);});
    return;
  }
  var total=cart.reduce(function(s,i){return s+i.price*i.qty;},0);
  var html=cart.map(function(item,idx){
    var meta=(item.size?'Size: '+item.size:'')+(item.size&&item.color?' · ':'')+(item.color?'<span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:'+item.color+';vertical-align:middle;margin-left:4px"></span>':'');
    return '<div class="cart-item" style="animation-delay:'+(idx*.06)+'s">'+
      '<img class="ci-img" src="'+item.img+'" alt="'+item.name+'" loading="lazy">'+
      '<div class="ci-body">'+
        '<div class="ci-name">'+item.name+'</div>'+
        (meta?'<div class="ci-meta">'+meta+'</div>':'')+
        '<div class="ci-unit">&#8377;'+item.price+' each</div>'+
        '<div class="ci-controls">'+
          '<button class="ci-q-btn" data-action="dec" data-key="'+item.key+'">&#8722;</button>'+
          '<span class="ci-qty-val">'+item.qty+'</span>'+
          '<button class="ci-q-btn" data-action="inc" data-key="'+item.key+'">+</button>'+
          '<span class="ci-sub">&#8377;'+(item.price*item.qty)+'</span>'+
        '</div>'+
      '</div>'+
      '<button class="ci-del" data-key="'+item.key+'" title="Hatao">&#128465;</button>'+
    '</div>';
  }).join('');
  body.innerHTML=html;
  foot.style.display='flex';
  document.getElementById('cartTotal').innerHTML='&#8377;'+total;
  body.querySelectorAll('.ci-q-btn').forEach(function(btn){
    btn.addEventListener('click',function(){
      var key=btn.dataset.key, action=btn.dataset.action;
      var item=cart.find(function(i){return i.key===key;});
      if(!item)return;
      if(action==='inc'){item.qty++;}
      else{item.qty--; if(item.qty<=0){removeFromCart(key);return;}}
      renderCartDrawer();
    });
  });
  body.querySelectorAll('.ci-del').forEach(function(btn){
    btn.addEventListener('click',function(){removeFromCart(btn.dataset.key);});
  });
}

function openCart(){renderCartDrawer();document.getElementById('cartDrawer').classList.add('open');document.getElementById('overlay').classList.add('open');document.body.style.overflow='hidden';}
function closeCart(){document.getElementById('cartDrawer').classList.remove('open');document.getElementById('overlay').classList.remove('open');document.body.style.overflow='';}

/* ===== SEND ORDER ===== */
function sendOrder(){
  var nEl=document.getElementById('custName'),pEl=document.getElementById('custPhone'),eEl=document.getElementById('custEmail'),oEl=document.getElementById('custNote');
  var name=nEl.value.trim(),phone=pEl.value.trim(),email=eEl.value.trim(),note=oEl.value.trim();
  [nEl,pEl].forEach(function(e){e.classList.remove('error');});
  if(!name){nEl.classList.add('error');nEl.focus();toast('&#9888; Apna naam likho bhai!');return;}
  if(!phone){pEl.classList.add('error');pEl.focus();toast('&#9888; Phone number dalna zaroori hai!');return;}
  if(!/^\d{10,13}$/.test(phone.replace(/\s+/g,''))){pEl.classList.add('error');pEl.focus();toast('&#9888; Sahi phone number likho!');return;}
  if(!cart.length){toast('&#9888; Cart mein kuch toh daalo!');return;}
  var btn=document.getElementById('sendBtn'),txt=document.getElementById('sendBtnText');
  btn.disabled=true; txt.innerHTML='Bhej rahe hain... &#8987;';
  var lines=cart.map(function(i){return '- '+i.name+(i.size?' ('+i.size+')':'')+' x'+i.qty+' = Rs.'+(i.price*i.qty);}).join('\n');
  var total=cart.reduce(function(s,i){return s+i.price*i.qty;},0);
  var params={to_email:EJ_MAIL,from_name:name,customer_phone:phone,customer_email:email||'Nahi diya',order_items:lines,order_total:'Rs.'+total,special_note:note||'Koi khaas baat nahi'};
  emailjs.send(EJ_SVC,EJ_TPL,params).then(
    function(){
      toast('&#127881; Order bhej diya! Hum jald contact karenge.',4000);
      cart=[];
      getAllCards().forEach(function(c){
        var b=c.querySelector('.p-cart-btn'),g=c.querySelector('.in-cart-badge');
        if(b){b.classList.remove('in-cart');b.querySelector('span').innerHTML='+ Cart';}
        if(g)g.classList.remove('show');
      });
      syncBadge();
      nEl.value='';pEl.value='';eEl.value='';oEl.value='';
      btn.disabled=false;txt.innerHTML='Order Bhejo &#9993;';
      renderCartDrawer();setTimeout(closeCart,2200);
    },
    function(err){
      console.error(err);
      var sub=encodeURIComponent('Naya Order - The Star Shop');
      var body=encodeURIComponent('Naam: '+name+'\nPhone: '+phone+'\nEmail: '+(email||'N/A')+'\n\nOrder:\n'+lines+'\n\nTotal: Rs.'+total+'\nNote: '+(note||'None'));
      window.open('mailto:'+EJ_MAIL+'?subject='+sub+'&body='+body);
      toast('&#128231; Email app se order bheja ja raha hai...',4000);
      btn.disabled=false;txt.innerHTML='Order Bhejo &#9993;';
    }
  );
}

/* ===== PRODUCT MODAL ===== */
function openModal(data){
  currentModalId=data.id;
  modalQty=1; selectedSize=''; selectedColor='';

  /* Main image */
  var mainImg=document.getElementById('pmMainImg');
  mainImg.src=data.img; mainImg.alt=data.name;
  mainImg.classList.remove('zoomed');

  /* Thumbnails — same image shown multiple times as demo */
  var thumbsEl=document.getElementById('pmThumbs');
  thumbsEl.innerHTML='';
  [data.img,data.img,data.img].forEach(function(src,i){
    var t=document.createElement('img');
    t.className='pm-thumb'+(i===0?' active':'');
    t.src=src; t.alt='View '+(i+1); t.loading='lazy';
    t.addEventListener('click',function(){
      mainImg.src=src; mainImg.classList.remove('zoomed');
      thumbsEl.querySelectorAll('.pm-thumb').forEach(function(x){x.classList.remove('active');});
      t.classList.add('active');
    });
    thumbsEl.appendChild(t);
  });

  /* Title + Price + Desc */
  document.getElementById('pmTitle').textContent=data.name;
  document.getElementById('pmPrice').innerHTML='&#8377;'+data.price;
  document.getElementById('pmDesc').textContent=data.desc;

  /* Sizes */
  var sizesEl=document.getElementById('pmSizes');
  var sizeWrap=document.getElementById('pmSizeWrap');
  sizesEl.innerHTML='';
  if(data.sizes && data.sizes!=='One Size'){
    sizeWrap.style.display='block';
    data.sizes.split(',').forEach(function(s,i){
      var btn=document.createElement('button');
      btn.className='size-opt'+(i===0?' selected':'');
      btn.textContent=s.trim();
      if(i===0)selectedSize=s.trim();
      btn.addEventListener('click',function(){
        sizesEl.querySelectorAll('.size-opt').forEach(function(x){x.classList.remove('selected');});
        btn.classList.add('selected'); selectedSize=s.trim();
      });
      sizesEl.appendChild(btn);
    });
  } else {
    sizeWrap.style.display='none';
    selectedSize='';
  }

  /* Colors */
  var colorsEl=document.getElementById('pmColors');
  colorsEl.innerHTML='';
  if(data.colors){
    data.colors.split(',').forEach(function(c,i){
      var btn=document.createElement('button');
      btn.className='color-opt'+(i===0?' selected':'');
      btn.style.background=c.trim();
      btn.title=c.trim();
      if(i===0)selectedColor=c.trim();
      btn.setAttribute('aria-label','Color '+c.trim());
      btn.addEventListener('click',function(){
        colorsEl.querySelectorAll('.color-opt').forEach(function(x){x.classList.remove('selected');});
        btn.classList.add('selected'); selectedColor=c.trim();
      });
      colorsEl.appendChild(btn);
    });
  }

  /* Qty */
  modalQty=1; document.getElementById('pmQtyVal').textContent='1';

  /* Tags */
  var tagsEl=document.getElementById('pmTags');
  tagsEl.innerHTML='';
  if(data.tags){
    data.tags.split(',').forEach(function(tag){
      var span=document.createElement('span');
      span.className='pm-feat-tag';
      span.textContent=tag.trim();
      tagsEl.appendChild(span);
    });
  }

  /* Related Products */
  var relGrid=document.getElementById('relatedGrid');
  relGrid.innerHTML='';
  getAllCards().forEach(function(c){
    if(c.dataset.id===data.id)return;
    var d=getCardData(c);
    var rc=document.createElement('div');
    rc.className='rel-card';
    rc.innerHTML='<img class="rel-img" src="'+d.img+'" alt="'+d.name+'" loading="lazy">'+
      '<div class="rel-info"><div class="rel-name">'+d.name+'</div><div class="rel-price">&#8377;'+d.price+'</div></div>';
    rc.addEventListener('click',function(){closeModal();setTimeout(function(){openModal(d);},200);});
    relGrid.appendChild(rc);
  });

  /* Modal CTA button */
  var pmBtn=document.getElementById('pmCartBtn');
  var inC=cart.some(function(i){return i.id===data.id;});
  pmBtn.innerHTML=inC?'&#10003; Cart Mein Hai':'&#128722; Cart Mein Daalo';

  /* Show modal */
  var overlay=document.getElementById('productModal');
  overlay.classList.add('open');
  document.getElementById('productModalBox').scrollTop=0;
  document.body.style.overflow='hidden';
}

function closeModal(){
  document.getElementById('productModal').classList.remove('open');
  document.body.style.overflow='';
}

/* Modal Zoom */
document.getElementById('pmMainImg').addEventListener('click',function(e){
  var img=this;
  if(img.classList.contains('zoomed')){
    img.classList.remove('zoomed');
  } else {
    var rect=img.getBoundingClientRect();
    var ox=((e.clientX-rect.left)/rect.width*100).toFixed(1)+'%';
    var oy=((e.clientY-rect.top)/rect.height*100).toFixed(1)+'%';
    img.style.setProperty('--ox',ox);
    img.style.setProperty('--oy',oy);
    img.classList.add('zoomed');
  }
});

/* Modal Qty */
document.getElementById('pmQtyDec').addEventListener('click',function(){if(modalQty>1){modalQty--;document.getElementById('pmQtyVal').textContent=modalQty;}});
document.getElementById('pmQtyInc').addEventListener('click',function(){modalQty++;document.getElementById('pmQtyVal').textContent=modalQty;});

/* Modal Cart Button */
document.getElementById('pmCartBtn').addEventListener('click',function(){
  if(!currentModalId)return;
  var card=document.querySelector('.p-card[data-id="'+currentModalId+'"]');
  if(!card)return;
  var d=getCardData(card);
  addToCartById(d.id,d.name,d.price,d.img,modalQty,selectedSize,selectedColor);
  this.innerHTML='&#10003; Cart Mein Hai';
  var info=d.name+(selectedSize?' ('+selectedSize+')':'');
  toast('"'+info+'" x'+modalQty+' cart mein add ho gaya! &#127881;');
});

/* Close modal */
document.getElementById('pmClose').addEventListener('click',closeModal);
document.getElementById('productModal').addEventListener('click',function(e){if(e.target===this)closeModal();});

/* ===== CAROUSEL ===== */
var carEl=document.getElementById('carousel');
var autoTimer=null;
function getCardW(){var f=carEl.querySelector('.p-card');return f?f.offsetWidth+20:288;}
function getCurIdx(){return Math.round(carEl.scrollLeft/(getCardW()||1));}
function scrollToIdx(i){var max=carEl.querySelectorAll('.p-card').length-1;i=Math.max(0,Math.min(i,max));carEl.scrollTo({left:i*getCardW(),behavior:'smooth'});}
function buildDots(){var wrap=document.getElementById('cDots'),cards=carEl.querySelectorAll('.p-card');wrap.innerHTML='';cards.forEach(function(_,i){var d=document.createElement('button');d.className='c-dot'+(i===0?' active':'');d.addEventListener('click',function(){scrollToIdx(i);});wrap.appendChild(d);});}
function updateDots(){var idx=getCurIdx(),dots=document.querySelectorAll('.c-dot'),n=carEl.querySelectorAll('.p-card').length;dots.forEach(function(d,i){d.classList.toggle('active',i===idx);});document.getElementById('prevBtn').disabled=(idx===0);document.getElementById('nextBtn').disabled=(idx>=n-1);}
function startAuto(){stopAuto();autoTimer=setInterval(function(){var idx=getCurIdx(),n=carEl.querySelectorAll('.p-card').length;scrollToIdx(idx>=n-1?0:idx+1);},3400);}
function stopAuto(){if(autoTimer){clearInterval(autoTimer);autoTimer=null;}}

/* ===== BIND ALL EVENTS ===== */
document.addEventListener('DOMContentLoaded',function(){

  renderCartDrawer();
  buildDots(); updateDots(); startAuto();

  /* Carousel */
  carEl.addEventListener('scroll',updateDots,{passive:true});
  carEl.addEventListener('mouseenter',stopAuto);
  carEl.addEventListener('mouseleave',startAuto);
  document.getElementById('prevBtn').addEventListener('click',function(){stopAuto();scrollToIdx(getCurIdx()-1);startAuto();});
  document.getElementById('nextBtn').addEventListener('click',function(){stopAuto();scrollToIdx(getCurIdx()+1);startAuto();});
  var tx=0;
  carEl.addEventListener('touchstart',function(e){tx=e.touches[0].pageX;stopAuto();},{passive:true});
  carEl.addEventListener('touchend',function(e){var d=tx-e.changedTouches[0].pageX;if(Math.abs(d)>40)scrollToIdx(getCurIdx()+(d>0?1:-1));startAuto();},{passive:true});

  /* Product cards — bind buttons */
  getAllCards().forEach(function(card){
    var d=getCardData(card);

    /* Image click → modal */
    var imgWrap=card.querySelector('.p-img-wrap');
    if(imgWrap)imgWrap.addEventListener('click',function(){openModal(d);});

    /* Details button → modal */
    var detailBtn=card.querySelector('.p-detail-btn');
    if(detailBtn)detailBtn.addEventListener('click',function(){openModal(d);});

    /* Cart button */
    var cartBtn=card.querySelector('.p-cart-btn');
    if(cartBtn)cartBtn.addEventListener('click',function(e){
      e.stopPropagation();
      addToCartById(d.id,d.name,d.price,d.img,1,'','');
      toast('"'+d.name+'" cart mein add ho gaya! &#127881;');
    });
  });

  /* Cart open/close */
  document.getElementById('cartOpenBtn').addEventListener('click',openCart);
  document.getElementById('cartCloseBtn').addEventListener('click',closeCart);
  document.getElementById('overlay').addEventListener('click',function(){closeCart();closeModal();});

  /* Send order */
  document.getElementById('sendBtn').addEventListener('click',sendOrder);

  /* Hero CTA */
  document.getElementById('shopNowHero').addEventListener('click',function(){document.getElementById('products').scrollIntoView({behavior:'smooth'});});

  /* ESC key */
  document.addEventListener('keydown',function(e){if(e.key==='Escape'){closeCart();closeModal();}});

  /* Input error reset */
  ['custName','custPhone','custEmail'].forEach(function(id){var el=document.getElementById(id);if(el)el.addEventListener('input',function(){el.classList.remove('error');});});
});

})();
</script>
</body>
</html>
