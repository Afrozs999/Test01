<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iLovePDF | Online PDF tools for PDF lovers</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<style>
/* ===================== RESET & BASE ===================== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

:root {
  --red: #e2264d;
  --red-dark: #c41e3a;
  --red-light: #f5e6e9;
  --red-lighter: #fdf2f4;
  --gray-100: #f8f8f8;
  --gray-200: #f0f0f0;
  --gray-300: #e0e0e0;
  --gray-400: #bdbdbd;
  --gray-500: #9e9e9e;
  --gray-600: #757575;
  --gray-700: #616161;
  --gray-800: #424242;
  --gray-900: #212121;
  --white: #ffffff;
  --text: #333333;
  --text-light: #666666;
  --text-lighter: #999999;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 40px rgba(0,0,0,0.1), 0 4px 12px rgba(0,0,0,0.06);
  --shadow-xl: 0 20px 60px rgba(0,0,0,0.12);
  --radius-sm: 6px;
  --radius: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;
  --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

body {
  font-family: 'Nunito Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--white);
  color: var(--text);
  line-height: 1.5;
  overflow-x: hidden;
  min-height: 100vh;
}

a { text-decoration: none; color: inherit; }
button { font-family: inherit; cursor: pointer; }
input { font-family: inherit; }

/* ===================== NAVBAR ===================== */
.navbar {
  background: var(--white);
  border-bottom: 1px solid var(--gray-200);
  position: sticky;
  top: 0;
  z-index: 200;
  transition: box-shadow var(--transition);
}
.navbar.scrolled { box-shadow: var(--shadow); }

.navbar-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  height: 60px;
  display: flex;
  align-items: center;
  gap: 0;
}

.nav-logo {
  display: flex;
  align-items: center;
  margin-right: 32px;
  flex-shrink: 0;
}
.nav-logo img { height: 28px; }
.nav-logo-svg {
  display: flex;
  align-items: center;
  gap: 2px;
}
.logo-i { color: var(--red); font-family: 'Nunito', sans-serif; font-weight: 900; font-size: 26px; letter-spacing: -1px; }
.logo-heart { color: var(--red); font-size: 20px; margin: 0 -1px; }
.logo-pdf { color: var(--text); font-family: 'Nunito', sans-serif; font-weight: 900; font-size: 26px; letter-spacing: -1px; }

.nav-menu { display: flex; align-items: center; gap: 4px; flex: 1; }

.nav-item {
  position: relative;
}
.nav-link {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 600;
  color: var(--text-light);
  transition: all var(--transition);
  cursor: pointer;
  white-space: nowrap;
}
.nav-link:hover, .nav-link.active {
  background: var(--gray-100);
  color: var(--text);
}
.nav-link .chevron {
  width: 12px;
  height: 12px;
  fill: none;
  stroke: currentColor;
  stroke-width: 2.5;
  transition: transform var(--transition);
}
.nav-item:hover .chevron { transform: rotate(180deg); }

/* Dropdown */
.dropdown {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  background: var(--white);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  min-width: 200px;
  padding: 8px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all var(--transition);
  z-index: 300;
}
.nav-item:hover .dropdown { opacity: 1; visibility: visible; transform: translateY(0); }
.dropdown-wide { min-width: 620px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0; padding: 16px; }
.dropdown-col { padding: 0 8px; }
.dropdown-col:not(:last-child) { border-right: 1px solid var(--gray-200); margin-right: 8px; padding-right: 16px; }
.dropdown-heading {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  color: var(--text-lighter);
  padding: 8px 8px 6px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.dropdown-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  border-radius: var(--radius-sm);
  font-size: 13.5px;
  font-weight: 600;
  color: var(--text-light);
  cursor: pointer;
  transition: all var(--transition);
}
.dropdown-item:hover { background: var(--gray-100); color: var(--text); }
.dropdown-item .tool-icon-sm {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  flex-shrink: 0;
}

.nav-actions { margin-left: auto; display: flex; align-items: center; gap: 8px; }
.btn-login {
  padding: 8px 16px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 700;
  color: var(--text-light);
  border: none;
  background: transparent;
  transition: all var(--transition);
}
.btn-login:hover { background: var(--gray-100); color: var(--text); }
.btn-signup {
  padding: 8px 20px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 700;
  color: var(--white);
  background: var(--red);
  border: none;
  transition: all var(--transition);
  box-shadow: 0 2px 8px rgba(226, 38, 77, 0.3);
}
.btn-signup:hover {
  background: var(--red-dark);
  box-shadow: 0 4px 16px rgba(226, 38, 77, 0.4);
  transform: translateY(-1px);
}

/* ===================== HERO ===================== */
.hero {
  background: linear-gradient(180deg, #fff5f7 0%, #ffffff 100%);
  padding: 60px 24px 48px;
  text-align: center;
  border-bottom: 1px solid var(--gray-200);
}
.hero-inner { max-width: 700px; margin: 0 auto; }
.hero h1 {
  font-family: 'Nunito', sans-serif;
  font-size: clamp(26px, 4vw, 36px);
  font-weight: 900;
  color: var(--gray-900);
  margin-bottom: 12px;
  line-height: 1.2;
  letter-spacing: -0.5px;
}
.hero h2 {
  font-size: clamp(14px, 2vw, 16px);
  font-weight: 400;
  color: var(--text-light);
  max-width: 560px;
  margin: 0 auto 32px;
  line-height: 1.6;
}

/* ===================== FILTER TABS ===================== */
.filter-tabs {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  flex-wrap: wrap;
  padding: 24px 24px 0;
  max-width: 1200px;
  margin: 0 auto;
}
.filter-tab {
  padding: 8px 18px;
  border-radius: 100px;
  font-size: 13.5px;
  font-weight: 700;
  border: 2px solid var(--gray-200);
  background: var(--white);
  color: var(--text-light);
  cursor: pointer;
  transition: all var(--transition);
  white-space: nowrap;
}
.filter-tab:hover {
  border-color: var(--red);
  color: var(--red);
}
.filter-tab.active {
  background: var(--red);
  border-color: var(--red);
  color: white;
  box-shadow: 0 2px 10px rgba(226, 38, 77, 0.3);
}

/* ===================== TOOLS GRID ===================== */
.tools-section {
  max-width: 1200px;
  margin: 0 auto;
  padding: 32px 24px 60px;
}
.tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(168px, 1fr));
  gap: 16px;
}
.tool-card {
  background: var(--white);
  border: 1.5px solid var(--gray-200);
  border-radius: var(--radius-lg);
  padding: 24px 20px 20px;
  cursor: pointer;
  transition: all var(--transition);
  text-align: left;
  display: block;
  position: relative;
  overflow: hidden;
}
.tool-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--card-gradient, linear-gradient(135deg, rgba(226,38,77,0.04), transparent));
  opacity: 0;
  transition: opacity var(--transition);
}
.tool-card:hover {
  border-color: var(--card-color, var(--red));
  box-shadow: var(--shadow-lg);
  transform: translateY(-3px);
}
.tool-card:hover::before { opacity: 1; }

.tool-card-icon {
  width: 52px;
  height: 52px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 14px;
  font-size: 26px;
  transition: transform var(--transition);
  background: var(--card-bg, #fff5f7);
}
.tool-card:hover .tool-card-icon { transform: scale(1.08) rotate(-4deg); }
.tool-card h3 {
  font-family: 'Nunito', sans-serif;
  font-size: 14.5px;
  font-weight: 800;
  color: var(--gray-900);
  margin-bottom: 6px;
  line-height: 1.3;
}
.tool-card p {
  font-size: 12px;
  color: var(--text-lighter);
  line-height: 1.5;
}
.tool-card-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 9px;
  font-weight: 800;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  padding: 3px 7px;
  border-radius: 100px;
  background: var(--red);
  color: white;
}

/* ===================== WORKFLOWS CARD ===================== */
.workflow-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  color: white;
}
.workflow-card h3, .workflow-card p { color: rgba(255,255,255,0.9); }
.workflow-card:hover { border-color: transparent; }

/* ===================== TOOL PAGE OVERLAY ===================== */
.tool-page {
  position: fixed;
  inset: 0;
  background: var(--white);
  z-index: 500;
  display: flex;
  flex-direction: column;
  opacity: 0;
  transform: translateY(20px);
  pointer-events: none;
  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  overflow-y: auto;
}
.tool-page.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.tool-page-nav {
  background: var(--white);
  border-bottom: 1px solid var(--gray-200);
  padding: 0 24px;
  height: 56px;
  display: flex;
  align-items: center;
  gap: 16px;
  position: sticky;
  top: 0;
  z-index: 10;
}
.back-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 700;
  color: var(--text-light);
  background: none;
  border: none;
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  transition: all var(--transition);
}
.back-btn:hover { background: var(--gray-100); color: var(--text); }
.back-btn svg { width: 16px; height: 16px; }

.tool-page-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 24px 60px;
  max-width: 900px;
  margin: 0 auto;
  width: 100%;
}

.tool-page-header {
  text-align: center;
  margin-bottom: 36px;
}
.tool-page-icon {
  width: 80px;
  height: 80px;
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  margin: 0 auto 20px;
  background: var(--red-lighter);
}
.tool-page-header h1 {
  font-family: 'Nunito', sans-serif;
  font-size: 28px;
  font-weight: 900;
  color: var(--gray-900);
  margin-bottom: 8px;
}
.tool-page-header p {
  font-size: 15px;
  color: var(--text-light);
  max-width: 480px;
  margin: 0 auto;
  line-height: 1.6;
}

/* Upload Zone */
.upload-zone {
  width: 100%;
  border: 2.5px dashed var(--gray-300);
  border-radius: var(--radius-xl);
  padding: 56px 40px;
  text-align: center;
  cursor: pointer;
  transition: all var(--transition);
  background: var(--gray-100);
  position: relative;
}
.upload-zone:hover, .upload-zone.drag-over {
  border-color: var(--red);
  background: var(--red-lighter);
}
.upload-zone input[type="file"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
  width: 100%;
  height: 100%;
}
.upload-icon-wrap {
  width: 72px;
  height: 72px;
  background: var(--white);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  box-shadow: var(--shadow);
  font-size: 32px;
  transition: transform var(--transition);
}
.upload-zone:hover .upload-icon-wrap { transform: scale(1.05) translateY(-2px); }
.upload-zone h2 {
  font-family: 'Nunito', sans-serif;
  font-size: 20px;
  font-weight: 900;
  color: var(--gray-900);
  margin-bottom: 8px;
}
.upload-zone p { font-size: 14px; color: var(--text-lighter); margin-bottom: 24px; }
.upload-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 28px;
  background: var(--red);
  color: white;
  border-radius: var(--radius-sm);
  font-size: 14.5px;
  font-weight: 800;
  border: none;
  transition: all var(--transition);
  box-shadow: 0 3px 12px rgba(226, 38, 77, 0.35);
  position: relative;
  z-index: 1;
}
.upload-btn:hover {
  background: var(--red-dark);
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(226, 38, 77, 0.45);
}
.upload-sources {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-top: 16px;
}
.source-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-lighter);
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  border: 1.5px solid var(--gray-300);
  background: var(--white);
  transition: all var(--transition);
  cursor: pointer;
}
.source-btn:hover { border-color: var(--gray-500); color: var(--text); }

/* Files List */
.files-list {
  width: 100%;
  margin-top: 24px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.file-item {
  display: flex;
  align-items: center;
  gap: 14px;
  background: var(--white);
  border: 1.5px solid var(--gray-200);
  border-radius: var(--radius);
  padding: 12px 16px;
  transition: all var(--transition);
}
.file-item:hover { border-color: var(--gray-400); box-shadow: var(--shadow-sm); }
.file-thumb {
  width: 40px;
  height: 48px;
  background: var(--red-lighter);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 10px;
  font-weight: 800;
  color: var(--red);
  border: 1px solid var(--red-light);
}
.file-info { flex: 1; min-width: 0; }
.file-name {
  font-size: 14px;
  font-weight: 700;
  color: var(--gray-900);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 2px;
}
.file-size { font-size: 12px; color: var(--text-lighter); }
.file-remove {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text-lighter);
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition);
  cursor: pointer;
}
.file-remove:hover { background: var(--red-lighter); color: var(--red); }

/* Options Panel */
.options-panel {
  width: 100%;
  background: var(--gray-100);
  border: 1.5px solid var(--gray-200);
  border-radius: var(--radius-lg);
  padding: 24px;
  margin-top: 20px;
}
.options-title {
  font-family: 'Nunito', sans-serif;
  font-size: 15px;
  font-weight: 800;
  color: var(--gray-900);
  margin-bottom: 16px;
}
.option-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid var(--gray-300);
}
.option-row:last-child { border-bottom: none; padding-bottom: 0; }
.option-label { font-size: 14px; font-weight: 600; color: var(--text); }
.option-desc { font-size: 12px; color: var(--text-lighter); margin-top: 2px; }
.option-select {
  padding: 7px 12px;
  border-radius: var(--radius-sm);
  border: 1.5px solid var(--gray-300);
  background: var(--white);
  font-family: 'Nunito Sans', sans-serif;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  cursor: pointer;
  outline: none;
  transition: border-color var(--transition);
}
.option-select:focus { border-color: var(--red); }
.toggle-switch {
  width: 44px;
  height: 24px;
  background: var(--gray-300);
  border-radius: 100px;
  cursor: pointer;
  position: relative;
  transition: background var(--transition);
  border: none;
  flex-shrink: 0;
}
.toggle-switch::after {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  background: white;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: transform var(--transition);
  box-shadow: var(--shadow-sm);
}
.toggle-switch.on { background: var(--red); }
.toggle-switch.on::after { transform: translateX(20px); }

/* Process Button Area */
.process-area {
  width: 100%;
  margin-top: 24px;
  text-align: center;
}
.process-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 16px 48px;
  background: var(--red);
  color: white;
  border-radius: var(--radius-sm);
  font-family: 'Nunito', sans-serif;
  font-size: 17px;
  font-weight: 900;
  border: none;
  cursor: pointer;
  transition: all var(--transition);
  box-shadow: 0 4px 16px rgba(226, 38, 77, 0.35);
  letter-spacing: 0.2px;
}
.process-btn:hover {
  background: var(--red-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(226, 38, 77, 0.45);
}
.process-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* Progress */
.progress-wrap {
  width: 100%;
  margin-top: 24px;
  display: none;
}
.progress-wrap.show { display: block; }
.progress-bar-track {
  height: 8px;
  background: var(--gray-200);
  border-radius: 100px;
  overflow: hidden;
  margin-bottom: 10px;
}
.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--red), #ff6b8a);
  border-radius: 100px;
  width: 0%;
  transition: width 0.3s ease;
}
.progress-text { font-size: 13px; color: var(--text-light); text-align: center; }

/* Result */
.result-area {
  width: 100%;
  margin-top: 24px;
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}
.result-area.show { display: flex; }
.result-success {
  background: #f0fdf4;
  border: 1.5px solid #86efac;
  border-radius: var(--radius-lg);
  padding: 28px;
  text-align: center;
  width: 100%;
}
.result-success h3 {
  font-family: 'Nunito', sans-serif;
  font-size: 20px;
  font-weight: 900;
  color: #166534;
  margin-bottom: 6px;
}
.result-success p { font-size: 14px; color: #16a34a; }
.result-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
.btn-download {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 13px 32px;
  background: #22c55e;
  color: white;
  border-radius: var(--radius-sm);
  font-family: 'Nunito', sans-serif;
  font-size: 15px;
  font-weight: 900;
  border: none;
  cursor: pointer;
  transition: all var(--transition);
  box-shadow: 0 3px 12px rgba(34, 197, 94, 0.3);
}
.btn-download:hover { background: #16a34a; transform: translateY(-1px); }
.btn-again {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 13px 28px;
  background: var(--white);
  color: var(--text);
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 700;
  border: 1.5px solid var(--gray-300);
  cursor: pointer;
  transition: all var(--transition);
}
.btn-again:hover { border-color: var(--gray-500); box-shadow: var(--shadow-sm); }

/* PDF Preview Grid */
.pdf-preview-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  width: 100%;
  margin-top: 16px;
}
.pdf-preview-item {
  border: 2px solid var(--gray-200);
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
  transition: all var(--transition);
  position: relative;
}
.pdf-preview-item.selected { border-color: var(--red); }
.pdf-preview-item:hover { box-shadow: var(--shadow); }
.pdf-preview-canvas { width: 100%; display: block; background: var(--gray-100); }
.pdf-page-num {
  text-align: center;
  font-size: 11px;
  font-weight: 700;
  color: var(--text-lighter);
  padding: 5px;
  background: var(--white);
}
.page-check {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--red);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  opacity: 0;
  transition: opacity var(--transition);
}
.pdf-preview-item.selected .page-check { opacity: 1; }

/* Watermark / Options inputs */
.text-input {
  width: 100%;
  padding: 10px 14px;
  border: 1.5px solid var(--gray-300);
  border-radius: var(--radius-sm);
  font-family: 'Nunito Sans', sans-serif;
  font-size: 14px;
  color: var(--text);
  background: var(--white);
  outline: none;
  transition: border-color var(--transition);
}
.text-input:focus { border-color: var(--red); }
.slider-input { width: 100%; accent-color: var(--red); }
.color-input { width: 40px; height: 32px; border-radius: var(--radius-sm); border: 1.5px solid var(--gray-300); cursor: pointer; padding: 2px; }
.form-group { display: flex; flex-direction: column; gap: 6px; width: 100%; margin-bottom: 12px; }
.form-label { font-size: 13px; font-weight: 700; color: var(--text-light); }

/* Range output */
.range-row { display: flex; align-items: center; gap: 12px; }
.range-value { font-size: 14px; font-weight: 800; color: var(--red); min-width: 40px; text-align: right; }

/* Rotate visual */
.rotate-preview {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
  padding: 24px;
}
.rotate-page-mock {
  width: 80px;
  height: 100px;
  background: var(--white);
  border: 2px solid var(--gray-300);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 800;
  color: var(--text-lighter);
  transition: transform 0.4s ease;
  box-shadow: var(--shadow-sm);
}
.rotate-btn-group { display: flex; flex-direction: column; gap: 8px; }
.rotate-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  border-radius: var(--radius-sm);
  border: 1.5px solid var(--gray-300);
  background: var(--white);
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  cursor: pointer;
  transition: all var(--transition);
}
.rotate-btn:hover { border-color: var(--red); color: var(--red); background: var(--red-lighter); }

/* Sign area */
.sign-area {
  width: 100%;
  border: 2px solid var(--gray-200);
  border-radius: var(--radius);
  overflow: hidden;
  background: var(--white);
}
.sign-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--gray-100);
  border-bottom: 1px solid var(--gray-200);
}
.sign-canvas { width: 100%; height: 160px; cursor: crosshair; display: block; }
.sign-tool-btn {
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  border: 1.5px solid var(--gray-300);
  background: var(--white);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all var(--transition);
  color: var(--text-light);
}
.sign-tool-btn:hover, .sign-tool-btn.active { background: var(--red); border-color: var(--red); color: white; }
.sign-colors { display: flex; gap: 6px; align-items: center; }
.sign-color {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all var(--transition);
}
.sign-color.active { border-color: var(--gray-600); transform: scale(1.2); }

/* Password field */
.password-field {
  display: flex;
  align-items: center;
  position: relative;
}
.password-field input { padding-right: 44px; }
.password-toggle {
  position: absolute;
  right: 12px;
  background: none;
  border: none;
  color: var(--text-lighter);
  cursor: pointer;
  font-size: 16px;
}

/* Compress quality */
.quality-options { display: flex; gap: 10px; margin-top: 4px; }
.quality-opt {
  flex: 1;
  padding: 12px;
  border-radius: var(--radius);
  border: 2px solid var(--gray-200);
  text-align: center;
  cursor: pointer;
  transition: all var(--transition);
}
.quality-opt:hover { border-color: var(--gray-400); }
.quality-opt.active { border-color: var(--red); background: var(--red-lighter); }
.quality-opt h4 { font-size: 13px; font-weight: 800; margin-bottom: 4px; }
.quality-opt p { font-size: 11px; color: var(--text-lighter); }
.quality-opt.active h4 { color: var(--red); }

/* Notification */
.notif {
  position: fixed;
  bottom: 28px;
  right: 28px;
  background: var(--gray-900);
  color: white;
  padding: 14px 20px;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 600;
  box-shadow: var(--shadow-xl);
  transform: translateY(80px);
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  max-width: 340px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.notif.show { transform: translateY(0); opacity: 1; }
.notif.success { background: #166534; }
.notif.error { background: #991b1b; }

/* ===================== PROMO SECTIONS ===================== */
.promo-section {
  padding: 48px 24px;
  background: var(--gray-100);
  border-top: 1px solid var(--gray-200);
}
.promo-inner {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}
.promo-card {
  background: var(--white);
  border: 1.5px solid var(--gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
  transition: all var(--transition);
  cursor: pointer;
}
.promo-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-3px); }
.promo-img {
  width: 100%;
  height: 160px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 60px;
}
.promo-body { padding: 20px; }
.promo-body h3 { font-family: 'Nunito', sans-serif; font-size: 16px; font-weight: 900; margin-bottom: 6px; }
.promo-body p { font-size: 13px; color: var(--text-light); }

/* Premium section */
.premium-section {
  padding: 56px 24px;
  background: var(--white);
  border-top: 1px solid var(--gray-200);
}
.premium-inner {
  max-width: 800px;
  margin: 0 auto;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  border-radius: var(--radius-xl);
  padding: 48px;
  color: white;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 32px;
  align-items: center;
}
.premium-inner h2 { font-family: 'Nunito', sans-serif; font-size: 26px; font-weight: 900; margin-bottom: 16px; }
.premium-inner ul { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.premium-inner ul li {
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0.9;
}
.premium-inner ul li::before { content: '‚úì'; color: #86efac; font-weight: 800; }
.btn-premium {
  padding: 14px 32px;
  background: var(--red);
  color: white;
  border-radius: var(--radius-sm);
  font-family: 'Nunito', sans-serif;
  font-size: 15px;
  font-weight: 900;
  border: none;
  cursor: pointer;
  white-space: nowrap;
  transition: all var(--transition);
  box-shadow: 0 4px 16px rgba(226, 38, 77, 0.4);
}
.btn-premium:hover { background: var(--red-dark); transform: translateY(-1px); }

/* Trust section */
.trust-section {
  padding: 28px 24px;
  background: var(--gray-100);
  border-top: 1px solid var(--gray-200);
  text-align: center;
}
.trust-inner { max-width: 700px; margin: 0 auto; }
.trust-title { font-size: 22px; font-family: 'Nunito', sans-serif; font-weight: 900; margin-bottom: 6px; }
.trust-sub { font-size: 14px; color: var(--text-light); margin-bottom: 24px; }
.trust-logos { display: flex; align-items: center; justify-content: center; gap: 32px; flex-wrap: wrap; }
.trust-logo {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 700;
  color: var(--text-lighter);
  padding: 10px 16px;
  border: 1.5px solid var(--gray-300);
  border-radius: var(--radius);
  background: var(--white);
}
.trust-logo span { font-size: 20px; }

/* ===================== FOOTER ===================== */
footer {
  background: #1a1a2e;
  color: rgba(255,255,255,0.7);
  padding: 48px 24px 32px;
}
.footer-inner {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
  gap: 32px;
  margin-bottom: 40px;
}
.footer-brand .logo-pdf { color: white; }
.footer-brand .logo-i { color: #ff6b8a; }
.footer-brand .logo-heart { color: #ff6b8a; }
.footer-desc { font-size: 13px; color: rgba(255,255,255,0.5); margin-top: 12px; line-height: 1.7; max-width: 240px; }
.footer-col h4 {
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.4);
  margin-bottom: 14px;
}
.footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 8px; }
.footer-col ul a {
  font-size: 13.5px;
  color: rgba(255,255,255,0.6);
  transition: color var(--transition);
}
.footer-col ul a:hover { color: white; }
.footer-bottom {
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 28px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 16px;
  max-width: 1200px;
  margin: 0 auto;
}
.footer-bottom p { font-size: 12.5px; color: rgba(255,255,255,0.4); }
.footer-store-links { display: flex; gap: 10px; flex-wrap: wrap; }
.store-badge {
  padding: 6px 14px;
  border: 1.5px solid rgba(255,255,255,0.2);
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 700;
  color: rgba(255,255,255,0.7);
  transition: all var(--transition);
  cursor: pointer;
}
.store-badge:hover { border-color: rgba(255,255,255,0.5); color: white; }

/* ===================== UTILITIES ===================== */
.hidden { display: none !important; }

@media (max-width: 900px) {
  .nav-menu { display: none; }
  .footer-inner { grid-template-columns: 1fr 1fr; }
  .promo-inner { grid-template-columns: 1fr; }
  .tools-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); }
  .premium-inner { grid-template-columns: 1fr; }
}
@media (max-width: 600px) {
  .tools-grid { grid-template-columns: repeat(2, 1fr); }
  .footer-inner { grid-template-columns: 1fr; }
  .hero h1 { font-size: 24px; }
  .quality-options { flex-direction: column; }
}

/* Page number positions */
.pagenumber-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 8px; }
.pos-btn {
  padding: 10px;
  border-radius: var(--radius-sm);
  border: 2px solid var(--gray-200);
  background: var(--white);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all var(--transition);
  text-align: center;
  color: var(--text-light);
}
.pos-btn:hover { border-color: var(--gray-400); }
.pos-btn.active { border-color: var(--red); color: var(--red); background: var(--red-lighter); }
</style>
</head>
<body>

<!-- NOTIFICATION -->
<div class="notif" id="notification">
  <span id="notif-icon">‚úì</span>
  <span id="notif-text">Done!</span>
</div>

<!-- NAVBAR -->
<nav class="navbar" id="navbar">
  <div class="navbar-inner">
    <a href="#" class="nav-logo" onclick="goHome()">
      <div class="nav-logo-svg">
        <span class="logo-i">i</span>
        <span class="logo-heart">‚ô•</span>
        <span class="logo-pdf">PDF</span>
      </div>
    </a>

    <div class="nav-menu">
      <!-- Merge -->
      <div class="nav-item">
        <a class="nav-link" onclick="openTool('merge')">Merge PDF</a>
      </div>
      <!-- Split -->
      <div class="nav-item">
        <a class="nav-link" onclick="openTool('split')">Split PDF</a>
      </div>
      <!-- Compress -->
      <div class="nav-item">
        <a class="nav-link" onclick="openTool('compress')">Compress PDF</a>
      </div>
      <!-- Convert dropdown -->
      <div class="nav-item">
        <a class="nav-link">
          Convert PDF
          <svg class="chevron" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
        </a>
        <div class="dropdown dropdown-wide">
          <div class="dropdown-col">
            <div class="dropdown-heading">Convert to PDF</div>
            <div class="dropdown-item" onclick="openTool('jpg-to-pdf')"><span class="tool-icon-sm" style="background:#fff3e0">üñºÔ∏è</span>JPG to PDF</div>
            <div class="dropdown-item" onclick="openTool('word-to-pdf')"><span class="tool-icon-sm" style="background:#e3f2fd">üìù</span>Word to PDF</div>
            <div class="dropdown-item" onclick="openTool('ppt-to-pdf')"><span class="tool-icon-sm" style="background:#fce4ec">üìä</span>PowerPoint to PDF</div>
            <div class="dropdown-item" onclick="openTool('excel-to-pdf')"><span class="tool-icon-sm" style="background:#e8f5e9">üìã</span>Excel to PDF</div>
            <div class="dropdown-item" onclick="openTool('html-to-pdf')"><span class="tool-icon-sm" style="background:#f3e5f5">üåê</span>HTML to PDF</div>
          </div>
          <div class="dropdown-col">
            <div class="dropdown-heading">Convert from PDF</div>
            <div class="dropdown-item" onclick="openTool('pdf-to-jpg')"><span class="tool-icon-sm" style="background:#fff3e0">üñºÔ∏è</span>PDF to JPG</div>
            <div class="dropdown-item" onclick="openTool('pdf-to-word')"><span class="tool-icon-sm" style="background:#e3f2fd">üìù</span>PDF to Word</div>
            <div class="dropdown-item" onclick="openTool('pdf-to-ppt')"><span class="tool-icon-sm" style="background:#fce4ec">üìä</span>PDF to PowerPoint</div>
            <div class="dropdown-item" onclick="openTool('pdf-to-excel')"><span class="tool-icon-sm" style="background:#e8f5e9">üìã</span>PDF to Excel</div>
            <div class="dropdown-item" onclick="openTool('pdf-to-pdfa')"><span class="tool-icon-sm" style="background:#f1f8e9">üìÑ</span>PDF to PDF/A</div>
          </div>
          <div class="dropdown-col">
            <div class="dropdown-heading">All Tools</div>
            <div class="dropdown-item" onclick="openTool('edit')"><span class="tool-icon-sm" style="background:#fce4ec">‚úèÔ∏è</span>Edit PDF</div>
            <div class="dropdown-item" onclick="openTool('sign')"><span class="tool-icon-sm" style="background:#e3f2fd">‚úçÔ∏è</span>Sign PDF</div>
            <div class="dropdown-item" onclick="openTool('watermark')"><span class="tool-icon-sm" style="background:#e8eaf6">üíß</span>Watermark</div>
            <div class="dropdown-item" onclick="openTool('protect')"><span class="tool-icon-sm" style="background:#fce4ec">üîí</span>Protect PDF</div>
            <div class="dropdown-item" onclick="openTool('ocr')"><span class="tool-icon-sm" style="background:#e8f5e9">ü§ñ</span>OCR PDF</div>
          </div>
        </div>
      </div>
      <!-- All tools dropdown -->
      <div class="nav-item">
        <a class="nav-link">
          All PDF tools
          <svg class="chevron" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
        </a>
        <div class="dropdown dropdown-wide">
          <div class="dropdown-col">
            <div class="dropdown-heading">Organize PDF</div>
            <div class="dropdown-item" onclick="openTool('merge')"><span class="tool-icon-sm" style="background:#fce4ec">üîó</span>Merge PDF</div>
            <div class="dropdown-item" onclick="openTool('split')"><span class="tool-icon-sm" style="background:#fce4ec">‚úÇÔ∏è</span>Split PDF</div>
            <div class="dropdown-item" onclick="openTool('organize')"><span class="tool-icon-sm" style="background:#fce4ec">üóÇÔ∏è</span>Organize PDF</div>
            <div class="dropdown-item" onclick="openTool('rotate')"><span class="tool-icon-sm" style="background:#fce4ec">üîÉ</span>Rotate PDF</div>
            <div class="dropdown-heading" style="margin-top:8px">Optimize PDF</div>
            <div class="dropdown-item" onclick="openTool('compress')"><span class="tool-icon-sm" style="background:#e3f2fd">‚ö°</span>Compress PDF</div>
            <div class="dropdown-item" onclick="openTool('repair')"><span class="tool-icon-sm" style="background:#e3f2fd">üîß</span>Repair PDF</div>
            <div class="dropdown-item" onclick="openTool('ocr')"><span class="tool-icon-sm" style="background:#e3f2fd">ü§ñ</span>OCR PDF</div>
          </div>
          <div class="dropdown-col">
            <div class="dropdown-heading">Edit PDF</div>
            <div class="dropdown-item" onclick="openTool('edit')"><span class="tool-icon-sm" style="background:#f3e5f5">‚úèÔ∏è</span>Edit PDF</div>
            <div class="dropdown-item" onclick="openTool('watermark')"><span class="tool-icon-sm" style="background:#f3e5f5">üíß</span>Watermark</div>
            <div class="dropdown-item" onclick="openTool('pagenumbers')"><span class="tool-icon-sm" style="background:#f3e5f5">üî¢</span>Page Numbers</div>
            <div class="dropdown-item" onclick="openTool('crop')"><span class="tool-icon-sm" style="background:#f3e5f5">‚úÇÔ∏è</span>Crop PDF</div>
            <div class="dropdown-heading" style="margin-top:8px">PDF Security</div>
            <div class="dropdown-item" onclick="openTool('protect')"><span class="tool-icon-sm" style="background:#fce4ec">üîí</span>Protect PDF</div>
            <div class="dropdown-item" onclick="openTool('unlock')"><span class="tool-icon-sm" style="background:#fce4ec">üîì</span>Unlock PDF</div>
            <div class="dropdown-item" onclick="openTool('sign')"><span class="tool-icon-sm" style="background:#fce4ec">‚úçÔ∏è</span>Sign PDF</div>
            <div class="dropdown-item" onclick="openTool('redact')"><span class="tool-icon-sm" style="background:#fce4ec">üö´</span>Redact PDF</div>
          </div>
          <div class="dropdown-col">
            <div class="dropdown-heading">PDF Intelligence</div>
            <div class="dropdown-item" onclick="openTool('translate')"><span class="tool-icon-sm" style="background:#e8f5e9">üåê</span>Translate PDF <span style="font-size:10px;color:var(--red);font-weight:800;margin-left:4px">NEW</span></div>
            <div class="dropdown-item" onclick="openTool('compare')"><span class="tool-icon-sm" style="background:#e8f5e9">üîç</span>Compare PDF</div>
          </div>
        </div>
      </div>
    </div>

    <div class="nav-actions">
      <button class="btn-login" onclick="showNotif('Login feature coming soon!', 'success')">Login</button>
      <button class="btn-signup" onclick="showNotif('Sign up feature coming soon!', 'success')">Sign up</button>
    </div>
  </div>
</nav>

<!-- HOME PAGE -->
<div id="homePage">
  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <h1>Every tool you need to work with PDFs in one place</h1>
      <h2>Every tool you need to use PDFs, at your fingertips. All are 100% FREE and easy to use! Merge, split, compress, convert, rotate, unlock and watermark PDFs with just a few clicks.</h2>
    </div>
  </section>

  <!-- FILTER TABS -->
  <div class="filter-tabs">
    <button class="filter-tab active" onclick="filterTools('all', this)">All</button>
    <button class="filter-tab" onclick="filterTools('workflow', this)">Workflows</button>
    <button class="filter-tab" onclick="filterTools('organize', this)">Organize PDF</button>
    <button class="filter-tab" onclick="filterTools('optimize', this)">Optimize PDF</button>
    <button class="filter-tab" onclick="filterTools('convert', this)">Convert PDF</button>
    <button class="filter-tab" onclick="filterTools('edit', this)">Edit PDF</button>
    <button class="filter-tab" onclick="filterTools('security', this)">PDF Security</button>
    <button class="filter-tab" onclick="filterTools('intelligence', this)">PDF Intelligence</button>
  </div>

  <!-- TOOLS GRID -->
  <section class="tools-section">
    <div class="tools-grid" id="toolsGrid"></div>
  </section>

  <!-- PROMO CARDS -->
  <section class="promo-section">
    <div class="promo-inner">
      <div class="promo-card" onclick="showNotif('Desktop app coming soon!', 'success')">
        <div class="promo-img" style="background: linear-gradient(135deg, #1a1a2e, #16213e)">üñ•Ô∏è</div>
        <div class="promo-body">
          <h3>Work offline with Desktop</h3>
          <p>Batch edit and manage documents locally, with no internet and no limits.</p>
        </div>
      </div>
      <div class="promo-card" onclick="showNotif('Mobile app coming soon!', 'success')">
        <div class="promo-img" style="background: linear-gradient(135deg, #667eea, #764ba2)">üì±</div>
        <div class="promo-body">
          <h3>On-the-go with Mobile</h3>
          <p>Your favorite tools, right in your pocket. Keep working on your projects anytime, anywhere.</p>
        </div>
      </div>
      <div class="promo-card" onclick="showNotif('Business plans coming soon!', 'success')">
        <div class="promo-img" style="background: linear-gradient(135deg, #f093fb, #f5576c)">üè¢</div>
        <div class="promo-body">
          <h3>Built for business</h3>
          <p>Automate document management, onboard teams easily, and scale with flexible plans.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- PREMIUM -->
  <section class="premium-section">
    <div class="premium-inner">
      <div>
        <h2>Get more with Premium</h2>
        <ul>
          <li>Get full access to iLovePDF and work offline with Desktop</li>
          <li>Edit PDFs, get advanced OCR for scanned documents and request secure eSignatures</li>
          <li>Connect tools and create custom workflows</li>
        </ul>
      </div>
      <div>
        <button class="btn-premium" onclick="showNotif('Premium plans coming soon!', 'success')">Get Premium</button>
      </div>
    </div>
  </section>

  <!-- TRUST -->
  <section class="trust-section">
    <div class="trust-inner">
      <p class="trust-title">The PDF software trusted by millions of users</p>
      <p class="trust-sub">iLovePDF is your number one web app for editing PDF with ease. Enjoy all the tools you need to work efficiently with your digital documents while keeping your data safe and secure.</p>
      <div class="trust-logos">
        <div class="trust-logo"><span>üèÜ</span> ISO 27001</div>
        <div class="trust-logo"><span>üîí</span> SSL Secure</div>
        <div class="trust-logo"><span>üìã</span> PDF Association</div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-inner">
      <div class="footer-brand">
        <div class="nav-logo-svg">
          <span class="logo-i">i</span>
          <span class="logo-heart">‚ô•</span>
          <span class="logo-pdf">PDF</span>
        </div>
        <p class="footer-desc">Your number one web app for editing PDF with ease. Keep your data safe and secure.</p>
      </div>
      <div class="footer-col">
        <h4>Product</h4>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Features</a></li>
          <li><a href="#">Pricing</a></li>
          <li><a href="#">Tools</a></li>
          <li><a href="#">FAQ</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Resources</h4>
        <ul>
          <li><a href="#">Desktop App</a></li>
          <li><a href="#">Mobile App</a></li>
          <li><a href="#">iLoveSign</a></li>
          <li><a href="#">iLoveAPI</a></li>
          <li><a href="#">iLoveIMG</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Solutions</h4>
        <ul>
          <li><a href="#">Business</a></li>
          <li><a href="#">Education</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Legal</h4>
        <ul>
          <li><a href="#">Security</a></li>
          <li><a href="#">Privacy policy</a></li>
          <li><a href="#">Terms &amp; conditions</a></li>
          <li><a href="#">Cookies</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>¬© iLovePDF 2026 ¬Æ ‚Äî Your PDF Editor</p>
      <div class="footer-store-links">
        <div class="store-badge">Google Play</div>
        <div class="store-badge">App Store</div>
        <div class="store-badge">Mac Store</div>
        <div class="store-badge">Microsoft Store</div>
      </div>
    </div>
  </footer>
</div>

<!-- TOOL PAGE (shared overlay) -->
<div class="tool-page" id="toolPage">
  <div class="tool-page-nav">
    <button class="back-btn" onclick="goHome()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
      All tools
    </button>
    <span style="font-size:13px; color:var(--text-lighter)" id="toolBreadcrumb"></span>
  </div>
  <div class="tool-page-content">
    <div class="tool-page-header">
      <div class="tool-page-icon" id="toolPageIcon">üìÑ</div>
      <h1 id="toolPageTitle">Tool</h1>
      <p id="toolPageDesc">Description</p>
    </div>
    <div id="toolPageBody" style="width:100%"></div>
  </div>
</div>

<script>
// ===================== TOOL DEFINITIONS =====================
const TOOLS = [
  { id:'merge', name:'Merge PDF', desc:'Combine PDFs in the order you want with the easiest PDF merger available.', icon:'üîó', color:'#e2264d', bg:'#fff5f7', cat:['all','organize'], gradient:'linear-gradient(135deg,rgba(226,38,77,0.06),transparent)' },
  { id:'split', name:'Split PDF', desc:'Separate one page or a whole set for easy conversion into independent PDF files.', icon:'‚úÇÔ∏è', color:'#e2264d', bg:'#fff5f7', cat:['all','organize'] },
  { id:'compress', name:'Compress PDF', desc:'Reduce file size while optimizing for maximal PDF quality.', icon:'‚ö°', color:'#1565c0', bg:'#e3f2fd', cat:['all','optimize'] },
  { id:'pdf-to-word', name:'PDF to Word', desc:'Easily convert your PDF files into easy to edit DOC and DOCX documents.', icon:'üìù', color:'#1565c0', bg:'#e3f2fd', cat:['all','convert'] },
  { id:'pdf-to-ppt', name:'PDF to PowerPoint', desc:'Turn your PDF files into easy to edit PPT and PPTX slideshows.', icon:'üìΩÔ∏è', color:'#d84315', bg:'#fbe9e7', cat:['all','convert'] },
  { id:'pdf-to-excel', name:'PDF to Excel', desc:'Pull data straight from PDFs into Excel spreadsheets in a few short seconds.', icon:'üìä', color:'#2e7d32', bg:'#e8f5e9', cat:['all','convert'] },
  { id:'word-to-pdf', name:'Word to PDF', desc:'Make DOC and DOCX files easy to read by converting them to PDF.', icon:'üìÑ', color:'#1565c0', bg:'#e3f2fd', cat:['all','convert'] },
  { id:'ppt-to-pdf', name:'PowerPoint to PDF', desc:'Make PPT and PPTX slideshows easy to view by converting them to PDF.', icon:'üìä', color:'#d84315', bg:'#fbe9e7', cat:['all','convert'] },
  { id:'excel-to-pdf', name:'Excel to PDF', desc:'Make EXCEL spreadsheets easy to read by converting them to PDF.', icon:'üìã', color:'#2e7d32', bg:'#e8f5e9', cat:['all','convert'] },
  { id:'edit', name:'Edit PDF', desc:'Add text, images, shapes or freehand annotations to a PDF document.', icon:'‚úèÔ∏è', color:'#6a1b9a', bg:'#f3e5f5', cat:['all','edit'] },
  { id:'pdf-to-jpg', name:'PDF to JPG', desc:'Convert each PDF page into a JPG or extract all images contained in a PDF.', icon:'üñºÔ∏è', color:'#f57c00', bg:'#fff3e0', cat:['all','convert'] },
  { id:'jpg-to-pdf', name:'JPG to PDF', desc:'Convert JPG images to PDF in seconds. Easily adjust orientation and margins.', icon:'üì∏', color:'#f57c00', bg:'#fff3e0', cat:['all','convert'] },
  { id:'sign', name:'Sign PDF', desc:'Sign yourself or request electronic signatures from others.', icon:'‚úçÔ∏è', color:'#00695c', bg:'#e0f2f1', cat:['all','security'], badge:'Popular' },
  { id:'watermark', name:'Watermark', desc:'Stamp an image or text over your PDF in seconds. Choose the typography, transparency and position.', icon:'üíß', color:'#283593', bg:'#e8eaf6', cat:['all','edit'] },
  { id:'rotate', name:'Rotate PDF', desc:'Rotate your PDFs the way you need them. You can even rotate multiple PDFs at once!', icon:'üîÉ', color:'#e2264d', bg:'#fff5f7', cat:['all','organize'] },
  { id:'html-to-pdf', name:'HTML to PDF', desc:'Convert webpages in HTML to PDF. Copy and paste the URL of the page you want and convert it to PDF with a click.', icon:'üåê', color:'#ef6c00', bg:'#fff3e0', cat:['all','convert'] },
  { id:'unlock', name:'Unlock PDF', desc:'Remove PDF password security, giving you the freedom to use your PDFs as you want.', icon:'üîì', color:'#2e7d32', bg:'#e8f5e9', cat:['all','security'] },
  { id:'protect', name:'Protect PDF', desc:'Protect PDF files with a password. Encrypt PDF documents to prevent unauthorized access.', icon:'üîí', color:'#c62828', bg:'#ffebee', cat:['all','security'] },
  { id:'organize', name:'Organize PDF', desc:'Sort pages of your PDF file however you like. Delete PDF pages or add PDF pages to your document at your convenience.', icon:'üóÇÔ∏è', color:'#6a1b9a', bg:'#f3e5f5', cat:['all','organize'] },
  { id:'pdf-to-pdfa', name:'PDF to PDF/A', desc:'Transform your PDF to PDF/A, the ISO-standardized version of PDF for long-term archiving.', icon:'üìÅ', color:'#0277bd', bg:'#e1f5fe', cat:['all','convert'] },
  { id:'repair', name:'Repair PDF', desc:'Repair a damaged PDF and recover data from corrupt PDF. Fix PDF files with our Repair tool.', icon:'üîß', color:'#4e342e', bg:'#efebe9', cat:['all','optimize'] },
  { id:'pagenumbers', name:'Page numbers', desc:'Add page numbers into PDFs with ease. Choose your positions, dimensions, typography.', icon:'üî¢', color:'#00695c', bg:'#e0f2f1', cat:['all','edit'] },
  { id:'scan', name:'Scan to PDF', desc:'Capture document scans from your mobile device and send them instantly to your browser.', icon:'üì∑', color:'#1565c0', bg:'#e3f2fd', cat:['all','optimize'] },
  { id:'ocr', name:'OCR PDF', desc:'Easily convert scanned PDF into searchable and selectable documents.', icon:'ü§ñ', color:'#2e7d32', bg:'#e8f5e9', cat:['all','optimize'] },
  { id:'compare', name:'Compare PDF', desc:'Show a side-by-side document comparison and easily spot changes between different file versions.', icon:'üîç', color:'#283593', bg:'#e8eaf6', cat:['all','intelligence'] },
  { id:'redact', name:'Redact PDF', desc:'Redact text and graphics to permanently remove sensitive information from a PDF.', icon:'üö´', color:'#c62828', bg:'#ffebee', cat:['all','security'] },
  { id:'crop', name:'Crop PDF', desc:'Crop margins of PDF documents or select specific areas, then apply the changes to one page or the whole document.', icon:'‚úÇÔ∏è', color:'#ef6c00', bg:'#fff3e0', cat:['all','edit'] },
  { id:'translate', name:'Translate PDF', desc:'Easily translate PDF files powered by AI. Keep fonts, layout, and formatting perfectly intact.', icon:'üåê', color:'#00695c', bg:'#e0f2f1', cat:['all','intelligence'], badge:'New!' },
  { id:'workflow', name:'Create a workflow', desc:'Create custom workflows with your favorite tools, automate tasks, and reuse them anytime.', icon:'‚öôÔ∏è', color:'#5c35c9', bg:'#ede7f6', cat:['all','workflow'], special:'workflow' },
];

let currentFilter = 'all';
let uploadedFiles = [];
let currentTool = null;
let signCanvas = null, signCtx = null, isDrawing = false, signColor = '#000000';
let rotateAngle = 0;

// Render tools grid
function renderTools(filter) {
  const grid = document.getElementById('toolsGrid');
  const filtered = TOOLS.filter(t => t.cat.includes(filter));
  grid.innerHTML = filtered.map((t, i) => `
    <div class="tool-card ${t.special === 'workflow' ? 'workflow-card' : ''}"
      style="--card-color:${t.color}; --card-gradient:${t.gradient||'linear-gradient(135deg,rgba(100,100,100,0.04),transparent)'}; animation: fadeIn 0.3s ${i*0.03}s both;"
      onclick="openTool('${t.id}')">
      ${t.badge ? `<div class="tool-card-badge">${t.badge}</div>` : ''}
      <div class="tool-card-icon" style="background:${t.bg}">${t.icon}</div>
      <h3>${t.name}</h3>
      <p>${t.desc}</p>
    </div>
  `).join('');
}

function filterTools(cat, el) {
  currentFilter = cat;
  document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  renderTools(cat);
}

// ===================== OPEN TOOL =====================
function openTool(id) {
  currentTool = TOOLS.find(t => t.id === id);
  if (!currentTool) return;

  uploadedFiles = [];
  rotateAngle = 0;

  document.getElementById('toolPageIcon').textContent = currentTool.icon;
  document.getElementById('toolPageIcon').style.background = currentTool.bg;
  document.getElementById('toolPageTitle').textContent = currentTool.name;
  document.getElementById('toolPageDesc').textContent = currentTool.desc;
  document.getElementById('toolBreadcrumb').textContent = currentTool.name;

  const body = document.getElementById('toolPageBody');
  body.innerHTML = buildToolUI(id);

  document.getElementById('toolPage').classList.add('active');
  document.getElementById('homePage').style.display = 'none';
  window.scrollTo(0, 0);

  // Special initializers
  if (id === 'sign') initSignCanvas();
  if (id === 'rotate') initRotatePreview();
  if (id === 'html-to-pdf') {} // nothing extra
}

function goHome() {
  document.getElementById('toolPage').classList.remove('active');
  document.getElementById('homePage').style.display = 'block';
  window.scrollTo(0, 0);
}

// ===================== BUILD TOOL UI =====================
function buildToolUI(id) {
  const acceptMap = {
    'merge':'application/pdf', 'split':'application/pdf', 'compress':'application/pdf',
    'pdf-to-word':'application/pdf', 'pdf-to-ppt':'application/pdf', 'pdf-to-excel':'application/pdf',
    'pdf-to-jpg':'application/pdf', 'pdf-to-pdfa':'application/pdf', 'edit':'application/pdf',
    'sign':'application/pdf', 'watermark':'application/pdf', 'rotate':'application/pdf',
    'unlock':'application/pdf', 'protect':'application/pdf', 'organize':'application/pdf',
    'repair':'application/pdf', 'pagenumbers':'application/pdf', 'ocr':'application/pdf',
    'compare':'application/pdf', 'redact':'application/pdf', 'crop':'application/pdf',
    'translate':'application/pdf',
    'word-to-pdf':'application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    'ppt-to-pdf':'application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation',
    'excel-to-pdf':'application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'jpg-to-pdf':'image/jpeg,image/png,image/gif,image/bmp,image/webp',
    'html-to-pdf':'text/html',
    'scan':'image/*',
  };

  const multi = ['merge','organize','compare','jpg-to-pdf','scan'].includes(id);
  const accept = acceptMap[id] || 'application/pdf';
  const btnLabel = getProcessLabel(id);
  const options = buildOptions(id);

  // HTML to PDF special
  if (id === 'html-to-pdf') {
    return `
      <div style="width:100%">
        <div class="form-group">
          <label class="form-label">Webpage URL</label>
          <input type="url" class="text-input" id="htmlUrl" placeholder="https://example.com" style="font-size:15px; padding:12px 16px;">
        </div>
        ${options}
        <div class="process-area">
          <button class="process-btn" onclick="processHTMLtoPDF()">üåê Convert to PDF</button>
        </div>
        <div class="progress-wrap" id="progressWrap">
          <div class="progress-bar-track"><div class="progress-bar-fill" id="progressFill"></div></div>
          <div class="progress-text" id="progressText">Converting...</div>
        </div>
        <div class="result-area" id="resultArea">
          <div class="result-success"><h3>‚úÖ Converted Successfully!</h3><p>Your PDF is ready to download.</p></div>
          <div class="result-actions">
            <button class="btn-download" onclick="downloadResult()">‚¨áÔ∏è Download PDF</button>
            <button class="btn-again" onclick="resetTool()">‚Ü∫ Convert another</button>
          </div>
        </div>
      </div>`;
  }

  // Sign special
  if (id === 'sign') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, false)}
        <div class="files-list" id="filesList"></div>
        <div id="signSection" style="display:none; width:100%; margin-top:20px">
          <div class="options-panel">
            <div class="options-title">Draw your signature</div>
            <div class="sign-area">
              <div class="sign-toolbar">
                <button class="sign-tool-btn active" id="signDraw" onclick="setSignMode('draw')">‚úèÔ∏è Draw</button>
                <button class="sign-tool-btn" id="signType" onclick="setSignMode('type')">‚å®Ô∏è Type</button>
                <div class="sign-colors">
                  <div class="sign-color active" style="background:#000000" onclick="setSignColor('#000000',this)"></div>
                  <div class="sign-color" style="background:#1a1aff" onclick="setSignColor('#1a1aff',this)"></div>
                  <div class="sign-color" style="background:#cc0000" onclick="setSignColor('#cc0000',this)"></div>
                </div>
                <button class="sign-tool-btn" onclick="clearSign()" style="margin-left:auto">üóëÔ∏è Clear</button>
              </div>
              <canvas class="sign-canvas" id="signCanvas" width="600" height="160"></canvas>
            </div>
            <input type="text" class="text-input" id="signTypeInput" style="display:none; margin-top:12px; font-size:20px; font-style:italic;" placeholder="Type your signature here...">
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>‚úçÔ∏è Sign PDF</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Rotate special
  if (id === 'rotate') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, multi)}
        <div class="files-list" id="filesList"></div>
        <div id="rotateSection" style="display:none; width:100%; margin-top:20px">
          <div class="options-panel">
            <div class="options-title">Rotation options</div>
            <div class="rotate-preview">
              <div class="rotate-page-mock" id="rotateMock">üìÑ<br>PAGE</div>
              <div class="rotate-btn-group">
                <button class="rotate-btn" onclick="doRotate(-90)">‚Ü∫ Rotate left 90¬∞</button>
                <button class="rotate-btn" onclick="doRotate(90)">‚Üª Rotate right 90¬∞</button>
                <button class="rotate-btn" onclick="doRotate(180)">‚Üï Rotate 180¬∞</button>
              </div>
            </div>
            <div class="option-row">
              <div><div class="option-label">Apply to</div></div>
              <select class="option-select">
                <option>All pages</option>
                <option>Even pages</option>
                <option>Odd pages</option>
                <option>Current page only</option>
              </select>
            </div>
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>üîÉ Rotate PDF</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Protect PDF
  if (id === 'protect') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, false)}
        <div class="files-list" id="filesList"></div>
        <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
          <div class="options-title">Password Settings</div>
          <div class="form-group">
            <label class="form-label">Set Password</label>
            <div class="password-field">
              <input type="password" class="text-input" id="pdfPassword" placeholder="Enter a strong password...">
              <button class="password-toggle" onclick="togglePwd('pdfPassword',this)">üëÅ</button>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Confirm Password</label>
            <div class="password-field">
              <input type="password" class="text-input" id="pdfPassword2" placeholder="Confirm password...">
              <button class="password-toggle" onclick="togglePwd('pdfPassword2',this)">üëÅ</button>
            </div>
          </div>
          <div class="option-row">
            <div><div class="option-label">Encryption level</div><div class="option-desc">Recommended: 256-bit AES</div></div>
            <select class="option-select">
              <option>256-bit AES (recommended)</option>
              <option>128-bit RC4</option>
            </select>
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processProtect()" disabled>üîí Protect PDF</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Watermark special
  if (id === 'watermark') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, false)}
        <div class="files-list" id="filesList"></div>
        <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
          <div class="options-title">Watermark Settings</div>
          <div class="form-group">
            <label class="form-label">Watermark Text</label>
            <input type="text" class="text-input" id="watermarkText" placeholder="e.g. CONFIDENTIAL, DRAFT...">
          </div>
          <div class="option-row">
            <div><div class="option-label">Font</div></div>
            <select class="option-select" id="watermarkFont">
              <option>Arial</option><option>Times New Roman</option><option>Helvetica</option><option>Georgia</option>
            </select>
          </div>
          <div class="option-row">
            <div><div class="option-label">Transparency</div></div>
            <div class="range-row" style="flex:1; justify-content:flex-end; gap:12px">
              <input type="range" class="slider-input" id="watermarkOpacity" min="10" max="100" value="50" style="width:140px" oninput="document.getElementById('opacityVal').textContent=this.value+'%'">
              <span class="range-value" id="opacityVal">50%</span>
            </div>
          </div>
          <div class="option-row">
            <div><div class="option-label">Color</div></div>
            <input type="color" class="color-input" id="watermarkColor" value="#cccccc">
          </div>
          <div class="option-row">
            <div><div class="option-label">Position</div></div>
            <select class="option-select">
              <option>Center (diagonal)</option><option>Top left</option><option>Top right</option><option>Bottom left</option><option>Bottom right</option>
            </select>
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>üíß Add Watermark</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Translate
  if (id === 'translate') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, false)}
        <div class="files-list" id="filesList"></div>
        <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
          <div class="options-title">Translation Settings</div>
          <div class="option-row">
            <div><div class="option-label">Source Language</div></div>
            <select class="option-select">
              <option>Auto Detect</option><option>English</option><option>Spanish</option><option>French</option><option>German</option><option>Hindi</option><option>Arabic</option><option>Chinese</option><option>Japanese</option>
            </select>
          </div>
          <div class="option-row">
            <div><div class="option-label">Target Language</div></div>
            <select class="option-select" id="targetLang">
              <option>Hindi</option><option>English</option><option>Spanish</option><option>French</option><option>German</option><option>Arabic</option><option>Chinese</option><option>Japanese</option><option>Portuguese</option>
            </select>
          </div>
          <div class="option-row">
            <div><div class="option-label">Preserve Layout</div><div class="option-desc">Keep original fonts and formatting</div></div>
            <button class="toggle-switch on" id="preserveLayout" onclick="this.classList.toggle('on')"></button>
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>üåê Translate PDF</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Compare
  if (id === 'compare') {
    return `
      <div style="width:100%">
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px">
          <div>
            <p style="font-size:13px;font-weight:700;color:var(--text-light);margin-bottom:10px">Original PDF</p>
            ${buildUploadZone(accept, false, 'compareFile1', 'Original')}
          </div>
          <div>
            <p style="font-size:13px;font-weight:700;color:var(--text-light);margin-bottom:10px">Modified PDF</p>
            ${buildUploadZone(accept, false, 'compareFile2', 'Modified')}
          </div>
        </div>
        <div class="process-area" style="margin-top:24px">
          <button class="process-btn" onclick="processCompare()">üîç Compare PDFs</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Page numbers
  if (id === 'pagenumbers') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, false)}
        <div class="files-list" id="filesList"></div>
        <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
          <div class="options-title">Page Number Settings</div>
          <div class="option-row">
            <div><div class="option-label">Position</div></div>
          </div>
          <div class="pagenumber-grid">
            <button class="pos-btn active" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Top Left</button>
            <button class="pos-btn" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Top Center</button>
            <button class="pos-btn" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Top Right</button>
            <button class="pos-btn" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Bottom Left</button>
            <button class="pos-btn" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Bottom Center</button>
            <button class="pos-btn" onclick="document.querySelectorAll('.pos-btn').forEach(b=>b.classList.remove('active')); this.classList.add('active')">Bottom Right</button>
          </div>
          <div class="option-row" style="margin-top:12px">
            <div><div class="option-label">Font Size</div></div>
            <div class="range-row">
              <input type="range" class="slider-input" min="8" max="24" value="12" style="width:140px" oninput="document.getElementById('fontSizeVal').textContent=this.value+'pt'">
              <span class="range-value" id="fontSizeVal">12pt</span>
            </div>
          </div>
          <div class="option-row">
            <div><div class="option-label">Start from page</div></div>
            <input type="number" class="option-select" min="1" value="1" style="width:80px">
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>üî¢ Add Page Numbers</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Compress special UI
  if (id === 'compress') {
    return `
      <div style="width:100%">
        ${buildUploadZone(accept, true)}
        <div class="files-list" id="filesList"></div>
        <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
          <div class="options-title">Compression Level</div>
          <div class="quality-options">
            <div class="quality-opt active" onclick="selectQuality(this)">
              <h4>üéØ Recommended</h4><p>Best balance between size and quality</p>
            </div>
            <div class="quality-opt" onclick="selectQuality(this)">
              <h4>üìâ Strong</h4><p>Max reduction, lower quality</p>
            </div>
            <div class="quality-opt" onclick="selectQuality(this)">
              <h4>üîÆ Extreme</h4><p>Smallest file, basic quality</p>
            </div>
          </div>
        </div>
        <div class="process-area">
          <button class="process-btn" id="processBtn" onclick="processTool()" disabled>‚ö° Compress PDF</button>
        </div>
        ${buildProgressResult()}
      </div>`;
  }

  // Default tool UI
  return `
    <div style="width:100%">
      ${buildUploadZone(accept, multi)}
      <div class="files-list" id="filesList"></div>
      ${options}
      <div class="process-area">
        <button class="process-btn" id="processBtn" onclick="processTool()" disabled>${btnLabel}</button>
      </div>
      ${buildProgressResult()}
    </div>`;
}

function buildUploadZone(accept, multi, inputId = 'fileInput', label = '') {
  return `
    <div class="upload-zone" id="uploadZone" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
      <input type="file" id="${inputId}" accept="${accept}" ${multi ? 'multiple' : ''} onchange="handleFileSelect(event)">
      <div class="upload-icon-wrap">üìÑ</div>
      <h2>Select ${label ? label + ' PDF' : 'PDF file'}</h2>
      <p>Drag & drop your file here</p>
      <button class="upload-btn" type="button" onclick="document.getElementById('${inputId}').click(); event.stopPropagation()">
        üìÇ Select ${label ? label : ''} PDF file
      </button>
      <div class="upload-sources">
        <button class="source-btn" type="button" onclick="showNotif('Google Drive integration coming soon!', 'success'); event.stopPropagation()">üìÅ My Drive</button>
        <button class="source-btn" type="button" onclick="showNotif('Dropbox integration coming soon!', 'success'); event.stopPropagation()">üíß Dropbox</button>
        <button class="source-btn" type="button" onclick="showNotif('Enter URL feature coming soon!', 'success'); event.stopPropagation()">üåê URL</button>
      </div>
    </div>`;
}

function buildProgressResult() {
  return `
    <div class="progress-wrap" id="progressWrap">
      <div class="progress-bar-track"><div class="progress-bar-fill" id="progressFill"></div></div>
      <div class="progress-text" id="progressText">Processing...</div>
    </div>
    <div class="result-area" id="resultArea">
      <div class="result-success"><h3 id="resultTitle">‚úÖ Done!</h3><p id="resultDesc">Your file is ready.</p></div>
      <div class="result-actions">
        <button class="btn-download" id="downloadBtn" onclick="downloadResult()">‚¨áÔ∏è Download</button>
        <button class="btn-again" onclick="resetTool()">‚Ü∫ Use again</button>
      </div>
    </div>`;
}

function buildOptions(id) {
  const opts = {
    'split': `
      <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
        <div class="options-title">Split Options</div>
        <div class="option-row">
          <div><div class="option-label">Split mode</div></div>
          <select class="option-select">
            <option>Split all pages</option><option>Select pages</option><option>Split by ranges</option><option>Extract pages</option>
          </select>
        </div>
        <div class="option-row">
          <div><div class="option-label">Page range</div><div class="option-desc">e.g. 1-3, 5, 7-10</div></div>
          <input type="text" class="option-select" placeholder="1-3, 5, 7-10" style="width:160px">
        </div>
      </div>`,
    'pdf-to-jpg': `
      <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
        <div class="options-title">Conversion Options</div>
        <div class="option-row">
          <div><div class="option-label">Convert mode</div></div>
          <select class="option-select">
            <option>Extract all pages</option><option>Extract images only</option>
          </select>
        </div>
        <div class="option-row">
          <div><div class="option-label">Image quality</div></div>
          <select class="option-select">
            <option>High (600 DPI)</option><option>Medium (300 DPI)</option><option>Low (72 DPI)</option>
          </select>
        </div>
      </div>`,
    'jpg-to-pdf': `
      <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
        <div class="options-title">Page Settings</div>
        <div class="option-row">
          <div><div class="option-label">Page orientation</div></div>
          <select class="option-select">
            <option>Portrait</option><option>Landscape</option>
          </select>
        </div>
        <div class="option-row">
          <div><div class="option-label">Page size</div></div>
          <select class="option-select">
            <option>A4</option><option>Letter</option><option>A3</option><option>Legal</option>
          </select>
        </div>
        <div class="option-row">
          <div><div class="option-label">Margin</div></div>
          <select class="option-select">
            <option>No margin</option><option>Small margin</option><option>Large margin</option>
          </select>
        </div>
      </div>`,
    'ocr': `
      <div class="options-panel" id="optionsPanel" style="display:none; margin-top:20px">
        <div class="options-title">OCR Settings</div>
        <div class="option-row">
          <div><div class="option-label">Language</div></div>
          <select class="option-select">
            <option>English</option><option>Hindi</option><option>Arabic</option><option>Spanish</option><option>French</option><option>German</option><option>Chinese</option><option>Japanese</option>
          </select>
        </div>
        <div class="option-row">
          <div><div class="option-label">Convert to searchable PDF</div></div>
          <button class="toggle-switch on" onclick="this.classList.toggle('on')"></button>
        </div>
      </div>`,
  };
  return opts[id] || '';
}

function getProcessLabel(id) {
  const labels = {
    'merge':'üîó Merge PDF', 'split':'‚úÇÔ∏è Split PDF', 'compress':'‚ö° Compress PDF',
    'pdf-to-word':'üìù Convert to Word', 'pdf-to-ppt':'üìΩÔ∏è Convert to PPT', 'pdf-to-excel':'üìä Convert to Excel',
    'word-to-pdf':'üìÑ Convert to PDF', 'ppt-to-pdf':'üìÑ Convert to PDF', 'excel-to-pdf':'üìÑ Convert to PDF',
    'edit':'‚úèÔ∏è Edit PDF', 'pdf-to-jpg':'üñºÔ∏è Convert to JPG', 'jpg-to-pdf':'üìÑ Convert to PDF',
    'sign':'‚úçÔ∏è Sign PDF', 'watermark':'üíß Add Watermark', 'rotate':'üîÉ Rotate PDF',
    'html-to-pdf':'üåê Convert to PDF', 'unlock':'üîì Unlock PDF', 'protect':'üîí Protect PDF',
    'organize':'üóÇÔ∏è Organize PDF', 'pdf-to-pdfa':'üìÅ Convert to PDF/A', 'repair':'üîß Repair PDF',
    'pagenumbers':'üî¢ Add Page Numbers', 'scan':'üì∑ Scan to PDF', 'ocr':'ü§ñ OCR PDF',
    'compare':'üîç Compare PDFs', 'redact':'üö´ Redact PDF', 'crop':'‚úÇÔ∏è Crop PDF',
    'translate':'üåê Translate PDF',
  };
  return labels[id] || '‚ö° Process';
}

// ===================== FILE HANDLING =====================
function handleFileSelect(e) {
  const files = Array.from(e.target.files);
  addFiles(files);
}

function handleDragOver(e) {
  e.preventDefault();
  document.getElementById('uploadZone').classList.add('drag-over');
}
function handleDragLeave(e) {
  document.getElementById('uploadZone').classList.remove('drag-over');
}
function handleDrop(e) {
  e.preventDefault();
  document.getElementById('uploadZone').classList.remove('drag-over');
  addFiles(Array.from(e.dataTransfer.files));
}

function addFiles(files) {
  uploadedFiles = [...uploadedFiles, ...files];
  renderFilesList();
  updateProcessBtn();

  // Show extra sections
  const sign = document.getElementById('signSection');
  const opts = document.getElementById('optionsPanel');
  const rotSec = document.getElementById('rotateSection');
  if (sign) sign.style.display = 'block';
  if (opts) opts.style.display = 'block';
  if (rotSec) rotSec.style.display = 'block';
}

function renderFilesList() {
  const list = document.getElementById('filesList');
  if (!list) return;
  list.innerHTML = uploadedFiles.map((f, i) => `
    <div class="file-item" id="fileItem${i}">
      <div class="file-thumb">PDF</div>
      <div class="file-info">
        <div class="file-name">${f.name}</div>
        <div class="file-size">${formatSize(f.size)}</div>
      </div>
      <button class="file-remove" onclick="removeFile(${i})">‚úï</button>
    </div>
  `).join('');
}

function removeFile(idx) {
  uploadedFiles.splice(idx, 1);
  renderFilesList();
  updateProcessBtn();
  if (uploadedFiles.length === 0) {
    const opts = document.getElementById('optionsPanel');
    const rotSec = document.getElementById('rotateSection');
    const sign = document.getElementById('signSection');
    if (opts) opts.style.display = 'none';
    if (rotSec) rotSec.style.display = 'none';
    if (sign) sign.style.display = 'none';
  }
}

function updateProcessBtn() {
  const btn = document.getElementById('processBtn');
  if (btn) btn.disabled = uploadedFiles.length === 0;
}

function formatSize(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / 1048576).toFixed(2) + ' MB';
}

// ===================== PROCESS TOOL =====================
function processTool() {
  if (uploadedFiles.length === 0 && currentTool?.id !== 'html-to-pdf') {
    showNotif('Please select a file first!', 'error');
    return;
  }
  runProgress(getSuccessMessage(currentTool?.id));
}

function processHTMLtoPDF() {
  const url = document.getElementById('htmlUrl')?.value;
  if (!url) { showNotif('Please enter a URL!', 'error'); return; }
  runProgress('HTML converted to PDF successfully!');
}

function processProtect() {
  if (uploadedFiles.length === 0) { showNotif('Please select a file first!', 'error'); return; }
  const p1 = document.getElementById('pdfPassword')?.value;
  const p2 = document.getElementById('pdfPassword2')?.value;
  if (!p1) { showNotif('Please enter a password!', 'error'); return; }
  if (p1 !== p2) { showNotif('Passwords do not match!', 'error'); return; }
  runProgress('PDF protected with password successfully!');
}

function processCompare() {
  runProgress('PDF comparison completed!', 'Compare PDF');
}

function runProgress(successMsg, toolOverride) {
  const progressWrap = document.getElementById('progressWrap');
  const progressFill = document.getElementById('progressFill');
  const progressText = document.getElementById('progressText');
  const resultArea = document.getElementById('resultArea');
  const processBtn = document.getElementById('processBtn');
  if (processBtn) processBtn.disabled = true;

  progressWrap.classList.add('show');
  resultArea?.classList.remove('show');

  let progress = 0;
  const steps = ['Uploading file...', 'Processing...', 'Optimizing...', 'Finalizing...'];
  let stepIdx = 0;

  const interval = setInterval(() => {
    progress += Math.random() * 18 + 5;
    if (progress > 100) progress = 100;
    progressFill.style.width = progress + '%';
    if (progress > stepIdx * 25 && stepIdx < steps.length) {
      progressText.textContent = steps[stepIdx++];
    }
    if (progress >= 100) {
      clearInterval(interval);
      setTimeout(() => {
        progressWrap.classList.remove('show');
        resultArea.classList.add('show');
        const titleEl = document.getElementById('resultTitle');
        const descEl = document.getElementById('resultDesc');
        const dlBtn = document.getElementById('downloadBtn');
        if (titleEl) titleEl.textContent = '‚úÖ ' + (successMsg || 'Done!');
        if (descEl) descEl.textContent = 'Your file has been processed and is ready to download.';
        if (dlBtn) dlBtn.textContent = '‚¨áÔ∏è Download ' + (currentTool?.name || 'File');
        showNotif('‚úì ' + (successMsg || 'Processing complete!'), 'success');
      }, 400);
    }
  }, 200);
}

function getSuccessMessage(id) {
  const msgs = {
    'merge': 'PDFs merged successfully!',
    'split': 'PDF split successfully!',
    'compress': 'PDF compressed ‚Äî file size reduced!',
    'pdf-to-word': 'PDF converted to Word!',
    'pdf-to-ppt': 'PDF converted to PowerPoint!',
    'pdf-to-excel': 'PDF converted to Excel!',
    'word-to-pdf': 'Word converted to PDF!',
    'ppt-to-pdf': 'PowerPoint converted to PDF!',
    'excel-to-pdf': 'Excel converted to PDF!',
    'edit': 'PDF edited successfully!',
    'pdf-to-jpg': 'PDF converted to JPG images!',
    'jpg-to-pdf': 'Images converted to PDF!',
    'sign': 'PDF signed successfully!',
    'watermark': 'Watermark added to PDF!',
    'rotate': 'PDF pages rotated!',
    'unlock': 'PDF unlocked successfully!',
    'protect': 'PDF protected with password!',
    'organize': 'PDF pages organized!',
    'pdf-to-pdfa': 'PDF converted to PDF/A!',
    'repair': 'PDF repaired successfully!',
    'pagenumbers': 'Page numbers added!',
    'ocr': 'OCR processing complete ‚Äî PDF is now searchable!',
    'redact': 'Sensitive content redacted!',
    'crop': 'PDF cropped successfully!',
    'translate': 'PDF translated successfully!',
  };
  return msgs[id] || 'Processing complete!';
}

function downloadResult() {
  // Create a sample downloadable PDF blob
  const content = `%PDF-1.4\n1 0 obj\n<< /Type /Catalog /Pages 2 0 R >>\nendobj\n2 0 obj\n<< /Type /Pages /Kids [3 0 R] /Count 1 >>\nendobj\n3 0 obj\n<< /Type /Page /Parent 2 0 R /Resources << /Font << /F1 << /Type /Font /Subtype /Type1 /BaseFont /Helvetica >> >> >> /MediaBox [0 0 612 792] /Contents 4 0 R >>\nendobj\n4 0 obj\n<< /Length 120 >>\nstream\nBT\n/F1 18 Tf\n50 720 Td\n(Processed by iLovePDF Clone) Tj\n0 -30 Td\n/F1 12 Tf\n(Your file has been processed successfully!) Tj\nET\nendstream\nendobj\nxref\n0 5\n0000000000 65535 f\n0000000009 00000 n\n0000000068 00000 n\n0000000125 00000 n\n0000000295 00000 n\ntrailer\n<< /Size 5 /Root 1 0 R >>\nstartxref\n467\n%%EOF`;

  const blob = new Blob([content], { type: 'application/pdf' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  const fname = uploadedFiles.length > 0 ? uploadedFiles[0].name.replace('.pdf', '') : 'processed';
  a.download = fname + '_' + (currentTool?.id || 'processed') + '.pdf';
  a.click();
  URL.revokeObjectURL(url);
  showNotif('‚úì Download started!', 'success');
}

function resetTool() {
  uploadedFiles = [];
  document.getElementById('resultArea').classList.remove('show');
  document.getElementById('progressWrap').classList.remove('show');
  const filesList = document.getElementById('filesList');
  if (filesList) filesList.innerHTML = '';
  const btn = document.getElementById('processBtn');
  if (btn) btn.disabled = true;
  const opts = document.getElementById('optionsPanel');
  const rotSec = document.getElementById('rotateSection');
  if (opts) opts.style.display = 'none';
  if (rotSec) rotSec.style.display = 'none';
}

// ===================== SIGN CANVAS =====================
let signMode = 'draw';
function initSignCanvas() {
  setTimeout(() => {
    signCanvas = document.getElementById('signCanvas');
    if (!signCanvas) return;
    signCtx = signCanvas.getContext('2d');
    signCtx.strokeStyle = signColor;
    signCtx.lineWidth = 2.5;
    signCtx.lineCap = 'round';
    signCtx.lineJoin = 'round';

    signCanvas.addEventListener('mousedown', e => { isDrawing = true; signCtx.beginPath(); signCtx.moveTo(getPos(e).x, getPos(e).y); });
    signCanvas.addEventListener('mousemove', e => { if (!isDrawing) return; signCtx.lineTo(getPos(e).x, getPos(e).y); signCtx.stroke(); });
    signCanvas.addEventListener('mouseup', () => isDrawing = false);
    signCanvas.addEventListener('mouseleave', () => isDrawing = false);
    signCanvas.addEventListener('touchstart', e => { e.preventDefault(); isDrawing = true; signCtx.beginPath(); const t = e.touches[0]; const r = signCanvas.getBoundingClientRect(); signCtx.moveTo(t.clientX - r.left, t.clientY - r.top); });
    signCanvas.addEventListener('touchmove', e => { e.preventDefault(); if (!isDrawing) return; const t = e.touches[0]; const r = signCanvas.getBoundingClientRect(); signCtx.lineTo(t.clientX - r.left, t.clientY - r.top); signCtx.stroke(); });
    signCanvas.addEventListener('touchend', () => isDrawing = false);
  }, 100);
}
function getPos(e) {
  const r = signCanvas.getBoundingClientRect();
  return { x: e.clientX - r.left, y: e.clientY - r.top };
}
function clearSign() {
  if (signCtx) signCtx.clearRect(0, 0, signCanvas.width, signCanvas.height);
}
function setSignColor(c, el) {
  signColor = c;
  document.querySelectorAll('.sign-color').forEach(s => s.classList.remove('active'));
  el.classList.add('active');
  if (signCtx) signCtx.strokeStyle = c;
}
function setSignMode(mode) {
  signMode = mode;
  document.getElementById('signCanvas').style.display = mode === 'draw' ? 'block' : 'none';
  document.getElementById('signTypeInput').style.display = mode === 'type' ? 'block' : 'none';
  document.getElementById('signDraw').classList.toggle('active', mode === 'draw');
  document.getElementById('signType').classList.toggle('active', mode === 'type');
}

// ===================== ROTATE =====================
function initRotatePreview() {}
function doRotate(deg) {
  rotateAngle = (rotateAngle + deg + 360) % 360;
  const mock = document.getElementById('rotateMock');
  if (mock) mock.style.transform = `rotate(${rotateAngle}deg)`;
}

// ===================== MISC =====================
function selectQuality(el) {
  document.querySelectorAll('.quality-opt').forEach(q => q.classList.remove('active'));
  el.classList.add('active');
}
function togglePwd(id, btn) {
  const inp = document.getElementById(id);
  if (inp.type === 'password') { inp.type = 'text'; btn.textContent = 'üôà'; }
  else { inp.type = 'password'; btn.textContent = 'üëÅ'; }
}

// ===================== NOTIFICATION =====================
function showNotif(msg, type = '') {
  const notif = document.getElementById('notification');
  const icon = document.getElementById('notif-icon');
  const text = document.getElementById('notif-text');
  notif.className = 'notif';
  if (type) notif.classList.add(type);
  icon.textContent = type === 'error' ? '‚úï' : '‚úì';
  text.textContent = msg;
  notif.classList.add('show');
  setTimeout(() => notif.classList.remove('show'), 3000);
}

// ===================== SCROLL NAVBAR =====================
window.addEventListener('scroll', () => {
  const nav = document.getElementById('navbar');
  if (nav) nav.classList.toggle('scrolled', window.scrollY > 10);
});

// ===================== INIT =====================
renderTools('all');

// Fade-in animation
const style = document.createElement('style');
style.textContent = `@keyframes fadeIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:none; } }`;
document.head.appendChild(style);
</script>
</body>
</html>
