<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Star Universe | Stream Movies & Series Free</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #06040f;
  --bg2: #0d0a1a;
  --bg3: #13102280;
  --glass: rgba(255,255,255,0.04);
  --glass2: rgba(255,255,255,0.07);
  --border: rgba(255,255,255,0.07);
  --border2: rgba(168,85,247,0.3);
  --p1: #7c3aed;
  --p2: #a855f7;
  --p3: #d8b4fe;
  --p4: #e879f9;
  --glow: rgba(124,58,237,0.3);
  --glow2: rgba(168,85,247,0.15);
  --gold: #f59e0b;
  --green: #10b981;
  --red: #ef4444;
  --t1: #f8f4ff;
  --t2: #b8a9d4;
  --t3: #6b5d8a;
  --nav: rgba(6,4,15,0.92);
  --card-shadow: 0 8px 40px rgba(0,0,0,0.6);
  --glow-shadow: 0 0 40px rgba(124,58,237,0.4);
}
[data-theme="light"] {
  --bg: #f0ebff;
  --bg2: #e8e0ff;
  --bg3: rgba(255,255,255,0.8);
  --glass: rgba(255,255,255,0.6);
  --glass2: rgba(255,255,255,0.8);
  --border: rgba(124,58,237,0.15);
  --border2: rgba(124,58,237,0.4);
  --p1: #7c3aed;
  --p2: #9333ea;
  --p3: #6d28d9;
  --glow: rgba(124,58,237,0.15);
  --glow2: rgba(124,58,237,0.08);
  --t1: #1a0533;
  --t2: #4a3070;
  --t3: #9580b8;
  --nav: rgba(240,235,255,0.95);
  --card-shadow: 0 4px 24px rgba(124,58,237,0.15);
  --glow-shadow: 0 0 30px rgba(124,58,237,0.2);
}

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  font-family:'Outfit',sans-serif;
  background:var(--bg);
  color:var(--t1);
  min-height:100vh;
  overflow-x:hidden;
  transition:background .4s,color .4s;
  cursor:default;
}

/* NOISE TEXTURE */
body::after{
  content:'';
  position:fixed;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events:none;z-index:9999;opacity:.4;
}

/* AMBIENT BLOBS */
body::before{
  content:'';
  position:fixed;inset:0;z-index:0;
  background:
    radial-gradient(ellipse 70% 50% at 15% 5%, rgba(124,58,237,0.2) 0%,transparent 55%),
    radial-gradient(ellipse 50% 40% at 85% 85%, rgba(168,85,247,0.15) 0%,transparent 50%),
    radial-gradient(ellipse 30% 25% at 50% 40%, rgba(232,121,249,0.07) 0%,transparent 55%);
  pointer-events:none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAVBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
nav{
  position:fixed;top:0;left:0;right:0;z-index:1000;
  height:68px;
  background:var(--nav);
  backdrop-filter:blur(24px) saturate(180%);
  -webkit-backdrop-filter:blur(24px) saturate(180%);
  border-bottom:1px solid var(--border);
  display:flex;align-items:center;
  padding:0 2rem;gap:2rem;
  transition:all .3s;
}
.nav-logo{
  display:flex;align-items:center;gap:0.4rem;
  cursor:pointer;text-decoration:none;flex-shrink:0;
}
.logo-icon{
  width:36px;height:36px;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.1rem;
  box-shadow:0 4px 16px var(--glow);
}
.logo-text{
  font-family:'Playfair Display',serif;
  font-size:1.4rem;font-weight:800;
  background:linear-gradient(135deg,var(--p2),var(--p4),#fff);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:-0.02em;
}

.nav-links{display:flex;align-items:center;gap:0.15rem;list-style:none}
.nav-links a{
  color:var(--t2);font-size:.875rem;font-weight:500;
  text-decoration:none;padding:.5rem .9rem;
  border-radius:9px;transition:all .2s;white-space:nowrap;
}
.nav-links a:hover,.nav-links a.active{color:var(--t1);background:var(--glass2)}
.nav-links a.active{color:var(--p2)}

.nav-search{
  flex:1;max-width:360px;
  display:flex;align-items:center;gap:.5rem;
  background:var(--glass2);border:1px solid var(--border);
  border-radius:12px;padding:.5rem 1rem;
  cursor:pointer;transition:all .2s;
}
.nav-search:hover{border-color:var(--p2);background:var(--glass)}
.nav-search span{font-size:.8rem;color:var(--t3);flex:1}
.nav-search kbd{
  font-size:.68rem;color:var(--t3);
  background:var(--glass);border:1px solid var(--border);
  padding:2px 7px;border-radius:5px;
}

.nav-actions{display:flex;align-items:center;gap:.6rem;margin-left:auto}
.icon-btn{
  width:38px;height:38px;
  background:var(--glass2);border:1px solid var(--border);
  border-radius:10px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  font-size:1rem;color:var(--t2);transition:all .2s;
}
.icon-btn:hover{background:var(--glow);color:var(--p2);border-color:var(--border2)}
.api-badge{
  display:flex;align-items:center;gap:.4rem;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;border:none;padding:.45rem 1rem;
  border-radius:10px;font-size:.78rem;font-weight:700;
  cursor:pointer;font-family:'Outfit',sans-serif;
  box-shadow:0 4px 16px var(--glow);
  transition:all .2s;
}
.api-badge:hover{transform:translateY(-1px);box-shadow:0 6px 24px rgba(124,58,237,.5)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SEARCH MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#searchModal{
  position:fixed;inset:0;z-index:5000;
  background:rgba(6,4,15,.92);backdrop-filter:blur(20px);
  display:flex;flex-direction:column;align-items:center;
  padding:6rem 1.5rem 2rem;
  opacity:0;pointer-events:none;transition:opacity .25s;
}
#searchModal.open{opacity:1;pointer-events:all}
.search-box{
  width:100%;max-width:620px;position:relative;margin-bottom:1.5rem;
}
.search-box input{
  width:100%;padding:1.1rem 1.1rem 1.1rem 3.5rem;
  background:var(--bg2);border:2px solid var(--p2);
  border-radius:16px;color:var(--t1);font-size:1.05rem;
  font-family:'Outfit',sans-serif;outline:none;
  box-shadow:0 0 40px rgba(124,58,237,.3);
  transition:all .2s;
}
.search-box input::placeholder{color:var(--t3)}
.search-box .s-icon{
  position:absolute;left:1.1rem;top:50%;transform:translateY(-50%);
  color:var(--p2);font-size:1.2rem;
}
.search-box .s-close{
  position:absolute;right:1rem;top:50%;transform:translateY(-50%);
  background:none;border:none;color:var(--t3);cursor:pointer;font-size:1.1rem;
  transition:color .2s;
}
.search-box .s-close:hover{color:var(--t1)}
#searchResults{width:100%;max-width:620px}
.search-item{
  display:flex;align-items:center;gap:1rem;
  padding:.7rem 1rem;border-radius:12px;cursor:pointer;
  border:1px solid transparent;transition:all .2s;
}
.search-item:hover{background:var(--glass2);border-color:var(--border)}
.search-item img{
  width:44px;height:58px;object-fit:cover;
  border-radius:7px;flex-shrink:0;
  background:var(--bg2);
}
.search-item-info .title{font-size:.9rem;font-weight:600}
.search-item-info .meta{font-size:.73rem;color:var(--t3);margin-top:.2rem}
.search-loading{text-align:center;color:var(--t3);font-size:.9rem;padding:2rem}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PLAYER MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#playerModal{
  position:fixed;inset:0;z-index:6000;
  background:rgba(0,0,0,.97);
  display:flex;flex-direction:column;
  opacity:0;pointer-events:none;transition:opacity .3s;
}
#playerModal.open{opacity:1;pointer-events:all}
.player-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:.75rem 1.5rem;
  background:rgba(0,0,0,.8);border-bottom:1px solid var(--border);
  flex-shrink:0;
}
.player-header .title{font-weight:700;font-size:1rem}
.player-header .close-btn{
  background:var(--glass2);border:1px solid var(--border);
  color:var(--t1);padding:.4rem 1rem;border-radius:8px;
  cursor:pointer;font-family:'Outfit',sans-serif;font-size:.82rem;
  transition:all .2s;
}
.player-header .close-btn:hover{background:var(--red);border-color:var(--red)}
.player-wrap{
  flex:1;display:flex;flex-direction:column;
  position:relative;overflow:hidden;
}
#playerFrame{width:100%;height:100%;border:none}
.player-sources{
  display:flex;gap:.5rem;padding:.6rem 1rem;
  background:rgba(0,0,0,.8);border-top:1px solid var(--border);
  flex-wrap:wrap;align-items:center;flex-shrink:0;
}
.player-sources span{font-size:.75rem;color:var(--t3);margin-right:.25rem}
.src-btn{
  padding:.3rem .75rem;border-radius:7px;
  border:1px solid var(--border);background:var(--glass2);
  color:var(--t2);font-size:.75rem;font-weight:600;
  cursor:pointer;font-family:'Outfit',sans-serif;
  transition:all .2s;
}
.src-btn:hover,.src-btn.active{
  background:var(--p1);color:#fff;border-color:var(--p1);
}
/* Season/Ep selector in player */
.ep-bar{
  display:flex;gap:.4rem;padding:.5rem 1rem;
  background:rgba(0,0,0,.7);border-top:1px solid var(--border);
  overflow-x:auto;scrollbar-width:thin;flex-shrink:0;
  scrollbar-color:var(--p1) transparent;
}
.ep-btn{
  flex-shrink:0;padding:.25rem .7rem;border-radius:6px;
  border:1px solid var(--border);background:var(--glass);
  color:var(--t2);font-size:.72rem;font-weight:600;
  cursor:pointer;font-family:'Outfit',sans-serif;transition:all .15s;
}
.ep-btn:hover,.ep-btn.active{background:var(--p2);color:#fff;border-color:var(--p2)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DETAIL MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#detailModal{
  position:fixed;inset:0;z-index:4000;
  background:rgba(6,4,15,.88);backdrop-filter:blur(16px);
  display:flex;align-items:flex-start;justify-content:center;
  padding:5rem 1rem 2rem;overflow-y:auto;
  opacity:0;pointer-events:none;transition:opacity .3s;
}
#detailModal.open{opacity:1;pointer-events:all}
.detail-card{
  background:var(--bg2);border:1px solid var(--border);
  border-radius:24px;width:100%;max-width:900px;
  overflow:hidden;
  transform:translateY(24px);transition:transform .35s cubic-bezier(.34,1.56,.64,1);
  position:relative;
}
#detailModal.open .detail-card{transform:translateY(0)}
.detail-backdrop{
  height:320px;position:relative;overflow:hidden;
}
.detail-backdrop img{
  width:100%;height:100%;object-fit:cover;
  filter:brightness(.6);
}
.detail-backdrop-overlay{
  position:absolute;inset:0;
  background:linear-gradient(0deg,var(--bg2) 0%,transparent 60%),
             linear-gradient(90deg,rgba(6,4,15,.8) 0%,transparent 60%);
}
.detail-close{
  position:absolute;top:1rem;right:1rem;z-index:10;
  width:38px;height:38px;
  background:rgba(0,0,0,.6);backdrop-filter:blur(8px);
  border:1px solid rgba(255,255,255,.15);border-radius:50%;
  color:#fff;font-size:1rem;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .2s;
}
.detail-close:hover{background:var(--red);border-color:var(--red)}
.detail-body{
  display:grid;grid-template-columns:180px 1fr;
  gap:1.5rem;padding:1.5rem 2rem 2rem;
  margin-top:-80px;position:relative;z-index:2;
}
.detail-poster{
  width:180px;border-radius:14px;overflow:hidden;
  box-shadow:0 16px 50px rgba(0,0,0,.7);
  flex-shrink:0;border:2px solid var(--border);
  background:var(--bg);
}
.detail-poster img{width:100%;display:block}
.detail-info h1{
  font-family:'Playfair Display',serif;
  font-size:2rem;font-weight:800;line-height:1.15;margin-bottom:.5rem;
}
.detail-meta{
  display:flex;align-items:center;gap:.75rem;
  flex-wrap:wrap;margin-bottom:1rem;font-size:.82rem;color:var(--t2);
}
.meta-rating{
  display:flex;align-items:center;gap:.25rem;
  color:var(--gold);font-weight:700;font-size:.88rem;
}
.meta-tag{
  padding:.2rem .65rem;border-radius:6px;
  background:var(--glass2);border:1px solid var(--border);
  font-size:.72rem;font-weight:600;
}
.detail-overview{
  color:var(--t2);line-height:1.7;font-size:.88rem;
  margin-bottom:1.25rem;
  display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;
}
.detail-actions{display:flex;gap:.6rem;flex-wrap:wrap}
.btn-primary{
  display:flex;align-items:center;gap:.4rem;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;border:none;padding:.75rem 1.75rem;
  border-radius:12px;font-size:.88rem;font-weight:700;
  cursor:pointer;font-family:'Outfit',sans-serif;
  box-shadow:0 4px 20px var(--glow);transition:all .2s;
}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(124,58,237,.55)}
.btn-sec{
  display:flex;align-items:center;gap:.4rem;
  background:var(--glass2);border:1px solid var(--border);
  color:var(--t1);padding:.75rem 1.25rem;
  border-radius:12px;font-size:.88rem;font-weight:500;
  cursor:pointer;font-family:'Outfit',sans-serif;
  transition:all .2s;
}
.btn-sec:hover{border-color:var(--p2);background:var(--glow2)}

/* Season selector in detail */
.season-tabs{
  display:flex;gap:.4rem;margin-top:1rem;flex-wrap:wrap;
}
.season-tab{
  padding:.3rem .75rem;border-radius:8px;
  border:1px solid var(--border);background:var(--glass);
  color:var(--t2);font-size:.75rem;font-weight:600;
  cursor:pointer;font-family:'Outfit',sans-serif;transition:all .15s;
}
.season-tab:hover,.season-tab.active{
  background:var(--p1);color:#fff;border-color:var(--p1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
main{padding-top:68px;position:relative;z-index:1}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero{
  position:relative;height:560px;overflow:hidden;
  background:var(--bg);
}
.hero-bg{
  position:absolute;inset:0;
  background-size:cover;background-position:center top;
  transition:all 1s ease;
}
.hero-overlay{
  position:absolute;inset:0;
  background:
    linear-gradient(90deg,rgba(6,4,15,.97) 0%,rgba(6,4,15,.7) 45%,rgba(6,4,15,.1) 100%),
    linear-gradient(0deg,rgba(6,4,15,.9) 0%,transparent 45%);
}
[data-theme="light"] .hero-overlay{
  background:
    linear-gradient(90deg,rgba(240,235,255,.97) 0%,rgba(240,235,255,.7) 45%,rgba(240,235,255,.1) 100%),
    linear-gradient(0deg,rgba(240,235,255,.8) 0%,transparent 45%);
}
.hero-content{
  position:relative;z-index:2;
  display:flex;flex-direction:column;justify-content:flex-end;
  height:100%;padding:3rem 3rem 3.5rem;max-width:580px;
}
.hero-tag{
  display:inline-flex;align-items:center;gap:.4rem;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;font-size:.7rem;font-weight:800;
  padding:.3rem .75rem;border-radius:20px;
  text-transform:uppercase;letter-spacing:.1em;
  margin-bottom:.85rem;width:fit-content;
  animation:popIn .4s ease both;
}
.hero-title{
  font-family:'Playfair Display',serif;
  font-size:3.2rem;font-weight:800;line-height:1.1;
  margin-bottom:.75rem;
  animation:slideUp .5s ease .1s both;
}
.hero-meta{
  display:flex;align-items:center;gap:.85rem;
  font-size:.82rem;color:var(--t2);margin-bottom:.85rem;
  animation:slideUp .5s ease .2s both;
}
.hero-rating{color:var(--gold);font-weight:700;display:flex;align-items:center;gap:.2rem}
.hero-desc{
  font-size:.9rem;color:var(--t2);line-height:1.65;
  margin-bottom:1.5rem;max-width:440px;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
  animation:slideUp .5s ease .3s both;
}
.hero-btns{display:flex;gap:.65rem;animation:slideUp .5s ease .4s both}

.hero-dots{
  position:absolute;bottom:1.5rem;right:3rem;z-index:3;
  display:flex;gap:.4rem;
}
.hdot{
  width:24px;height:4px;border-radius:2px;
  background:rgba(255,255,255,.2);cursor:pointer;transition:all .3s;
}
.hdot.active{background:var(--p2);width:40px}

@keyframes popIn{from{scale:.7;opacity:0}to{scale:1;opacity:1}}
@keyframes slideUp{from{transform:translateY(18px);opacity:0}to{transform:translateY(0);opacity:1}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section{padding:0 2.5rem 2.5rem;position:relative}
.section-hdr{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:1.2rem;
}
.section-title{
  font-family:'Playfair Display',serif;
  font-size:1.25rem;font-weight:700;
  display:flex;align-items:center;gap:.6rem;
}
.section-title::before{
  content:'';display:block;
  width:3px;height:20px;border-radius:2px;
  background:linear-gradient(180deg,var(--p2),var(--p4));
}
.see-all{
  font-size:.78rem;color:var(--p2);font-weight:600;
  text-decoration:none;cursor:pointer;
  padding:.35rem .75rem;border-radius:8px;
  background:var(--glow2);border:1px solid var(--border2);
  transition:all .2s;display:flex;align-items:center;gap:.25rem;
}
.see-all:hover{background:var(--p1);color:#fff;border-color:var(--p1)}

/* GRID */
.card-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:1.1rem;
}
.card-grid.cols6{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}

/* SCROLL SECTION */
.scroll-wrap{position:relative}
.scroll-row{
  display:flex;gap:1rem;overflow-x:auto;
  padding-bottom:.5rem;
  scrollbar-width:thin;scrollbar-color:var(--p1) transparent;
}
.scroll-row::-webkit-scrollbar{height:3px}
.scroll-row::-webkit-scrollbar-thumb{background:var(--p1);border-radius:2px}
.scroll-row .movie-card{flex:0 0 160px}

.scroll-arrow{
  position:absolute;top:35%;transform:translateY(-50%);
  z-index:10;width:38px;height:38px;
  background:var(--bg2);border:1px solid var(--border);
  border-radius:50%;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  color:var(--t1);font-size:.85rem;transition:all .2s;
  box-shadow:var(--card-shadow);
}
.scroll-arrow:hover{background:var(--p1);border-color:var(--p1)}
.scroll-arrow.l{left:-18px}.scroll-arrow.r{right:-18px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MOVIE CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.movie-card{
  border-radius:14px;overflow:hidden;
  background:var(--bg3);border:1px solid var(--border);
  cursor:pointer;position:relative;
  transition:all .3s cubic-bezier(.34,1.56,.64,1);
}
.movie-card:hover{
  transform:translateY(-10px) scale(1.03);
  box-shadow:var(--glow-shadow),var(--card-shadow);
  border-color:var(--p2);z-index:10;
}
.card-thumb{
  width:100%;aspect-ratio:2/3;
  background:linear-gradient(135deg,var(--p1),#1a0a2e);
  position:relative;overflow:hidden;
}
.card-thumb img{
  width:100%;height:100%;object-fit:cover;
  transition:transform .4s;
}
.movie-card:hover .card-thumb img{transform:scale(1.08)}
.card-thumb .placeholder{
  width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
  font-size:2.5rem;color:rgba(255,255,255,.15);
}

.card-badge{
  position:absolute;top:.45rem;left:.45rem;
  font-size:.6rem;font-weight:800;text-transform:uppercase;
  padding:.18rem .5rem;border-radius:5px;letter-spacing:.06em;
}
.cb-hd{background:linear-gradient(135deg,var(--p1),var(--p4));color:#fff}
.cb-new{background:linear-gradient(135deg,#059669,#10b981);color:#fff}
.cb-top{background:linear-gradient(135deg,var(--gold),#f97316);color:#fff}
.cb-tv{background:rgba(0,0,0,.7);border:1px solid rgba(255,255,255,.15);color:#fff}

.card-rating{
  position:absolute;top:.45rem;right:.45rem;
  background:rgba(0,0,0,.75);backdrop-filter:blur(8px);
  color:var(--gold);font-size:.68rem;font-weight:700;
  padding:.18rem .5rem;border-radius:5px;
  display:flex;align-items:center;gap:.15rem;
}

.card-overlay{
  position:absolute;inset:0;
  background:linear-gradient(0deg,rgba(6,4,15,.9) 0%,rgba(124,58,237,.2) 60%,transparent 100%);
  opacity:0;transition:opacity .3s;
  display:flex;flex-direction:column;justify-content:flex-end;
  padding:.65rem;
}
.movie-card:hover .card-overlay{opacity:1}
.play-circle{
  width:46px;height:46px;margin:0 auto .5rem;
  background:linear-gradient(135deg,var(--p2),var(--p4));
  border-radius:50%;display:flex;align-items:center;justify-content:center;
  font-size:1rem;color:#fff;
  transform:scale(.8);transition:transform .3s;
  box-shadow:0 4px 16px var(--glow);
}
.movie-card:hover .play-circle{transform:scale(1)}

.card-info{padding:.65rem}
.card-title{
  font-size:.82rem;font-weight:600;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  margin-bottom:.2rem;
}
.card-sub{
  font-size:.7rem;color:var(--t3);
  display:flex;align-items:center;gap:.4rem;
}
.card-type{
  font-size:.62rem;font-weight:700;text-transform:uppercase;
  color:var(--p2);letter-spacing:.05em;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOADING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.skeleton{
  background:linear-gradient(90deg,var(--glass) 25%,var(--glass2) 50%,var(--glass) 75%);
  background-size:400% 100%;animation:skel 1.4s infinite;border-radius:10px;
}
@keyframes skel{0%{background-position:100%}100%{background-position:-100%}}
.skel-card{border-radius:14px;overflow:hidden;background:var(--bg3);border:1px solid var(--border)}
.skel-thumb{width:100%;aspect-ratio:2/3}
.skel-line{height:12px;margin:.65rem .65rem .3rem;border-radius:6px}
.skel-line.short{width:60%;margin:.3rem .65rem .65rem}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GENRE PILLS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.genre-bar{
  display:flex;gap:.45rem;padding:0 2.5rem 1.5rem;
  overflow-x:auto;scrollbar-width:none;
}
.genre-bar::-webkit-scrollbar{display:none}
.gpill{
  flex-shrink:0;padding:.4rem .95rem;border-radius:20px;
  border:1px solid var(--border);background:var(--glass);
  color:var(--t2);font-size:.78rem;font-weight:500;
  cursor:pointer;transition:all .2s;white-space:nowrap;
}
.gpill:hover,.gpill.active{
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;border-color:transparent;
  box-shadow:0 4px 14px var(--glow);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• API KEY INPUT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#apiModal{
  position:fixed;inset:0;z-index:7000;
  background:rgba(6,4,15,.95);backdrop-filter:blur(20px);
  display:flex;align-items:center;justify-content:center;
  padding:1.5rem;opacity:0;pointer-events:none;transition:opacity .3s;
}
#apiModal.open{opacity:1;pointer-events:all}
.api-box{
  background:var(--bg2);border:1px solid var(--border2);
  border-radius:24px;width:100%;max-width:500px;
  padding:2.5rem;text-align:center;
  box-shadow:0 0 60px rgba(124,58,237,.3);
}
.api-box .icon{font-size:3rem;margin-bottom:1rem}
.api-box h2{font-family:'Playfair Display',serif;font-size:1.6rem;margin-bottom:.5rem}
.api-box p{color:var(--t2);font-size:.85rem;line-height:1.6;margin-bottom:1.5rem}
.api-box a{color:var(--p2);text-decoration:none}
.api-input{
  width:100%;padding:.85rem 1rem;
  background:var(--glass2);border:2px solid var(--border);
  border-radius:12px;color:var(--t1);font-size:.9rem;
  font-family:'Outfit',sans-serif;outline:none;
  transition:all .2s;margin-bottom:1rem;
}
.api-input:focus{border-color:var(--p2);box-shadow:0 0 20px var(--glow)}
.api-submit{
  width:100%;padding:.85rem;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;border:none;border-radius:12px;
  font-size:.9rem;font-weight:700;cursor:pointer;
  font-family:'Outfit',sans-serif;
  box-shadow:0 4px 20px var(--glow);transition:all .2s;
}
.api-submit:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(124,58,237,.5)}
.api-demo{
  margin-top:.75rem;font-size:.75rem;color:var(--t3);cursor:pointer;
  text-decoration:underline;background:none;border:none;
  color:var(--t3);font-family:'Outfit',sans-serif;
}
.api-demo:hover{color:var(--p2)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#toast{
  position:fixed;bottom:2rem;right:2rem;z-index:9000;
  background:linear-gradient(135deg,var(--p1),var(--p4));
  color:#fff;padding:.7rem 1.25rem;border-radius:12px;
  font-size:.83rem;font-weight:500;
  box-shadow:0 8px 24px var(--glow);
  transform:translateY(80px);opacity:0;
  transition:all .3s cubic-bezier(.34,1.56,.64,1);
  pointer-events:none;display:flex;align-items:center;gap:.5rem;
  max-width:320px;
}
#toast.show{transform:translateY(0);opacity:1}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
footer{
  background:var(--bg2);border-top:1px solid var(--border);
  padding:3rem 2.5rem 2rem;margin-top:4rem;
  position:relative;z-index:1;
}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:2rem;margin-bottom:2rem}
.footer-logo{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem}
.footer-desc{font-size:.8rem;color:var(--t3);line-height:1.65;max-width:260px}
.footer-notice{
  margin-top:1rem;padding:.65rem .85rem;
  background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.2);
  border-radius:10px;font-size:.7rem;color:var(--t3);line-height:1.5;
}
.footer-col h4{
  font-size:.72rem;font-weight:800;text-transform:uppercase;
  letter-spacing:.1em;color:var(--t3);margin-bottom:.65rem;
}
.footer-links{list-style:none;display:flex;flex-direction:column;gap:.35rem}
.footer-links a{font-size:.8rem;color:var(--t2);text-decoration:none;transition:color .15s}
.footer-links a:hover{color:var(--p2)}
.footer-bottom{
  display:flex;justify-content:space-between;align-items:center;
  padding-top:1.5rem;border-top:1px solid var(--border);
  font-size:.75rem;color:var(--t3);flex-wrap:wrap;gap:.5rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MOBILE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mobile-bar{
  position:fixed;bottom:0;left:0;right:0;z-index:1000;
  background:var(--nav);backdrop-filter:blur(20px);
  border-top:1px solid var(--border);
  display:none;justify-content:space-around;
  padding:.5rem 0 calc(.5rem + env(safe-area-inset-bottom));
}
.m-btn{
  display:flex;flex-direction:column;align-items:center;gap:.2rem;
  background:none;border:none;color:var(--t3);
  font-size:.6rem;font-family:'Outfit',sans-serif;cursor:pointer;
  padding:.3rem .8rem;transition:color .2s;
}
.m-btn span{font-size:1.25rem}
.m-btn.active,.m-btn:hover{color:var(--p2)}

@media(max-width:768px){
  .mobile-bar{display:flex}
  .nav-links,.nav-search{display:none}
  main{padding-bottom:70px}
  .hero{height:440px}
  .hero-content{padding:1.5rem 1.5rem 2.5rem}
  .hero-title{font-size:2.1rem}
  .section{padding:0 1rem 2rem}
  .genre-bar{padding:0 1rem 1.2rem}
  .footer-grid{grid-template-columns:1fr 1fr}
  .detail-body{grid-template-columns:1fr;text-align:center}
  .detail-poster{width:140px;margin:0 auto}
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• API KEY MODAL â•â•â•â•â•â•â•â•â•â• -->
<div id="apiModal" class="open">
  <div class="api-box">
    <div class="icon">ğŸ”‘</div>
    <h2>TMDB API Key</h2>
    <p>
      Star Universe uses <strong>TMDB API</strong> for real movie data, posters & ratings.<br><br>
      Get your <strong>FREE</strong> API key from:<br>
      <a href="https://www.themoviedb.org/settings/api" target="_blank">themoviedb.org/settings/api</a>
      <br><br>
      <em>Ya demo mode me use karo â€” limited data ke saath</em>
    </p>
    <input class="api-input" id="apiKeyInput" placeholder="Paste your TMDB API key here..." type="text">
    <button class="api-submit" onclick="saveApiKey()">ğŸš€ Launch Star Universe</button>
    <br>
    <button class="api-demo" onclick="useDemoMode()">â–¶ Demo Mode (Limited Data)</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• NAVBAR â•â•â•â•â•â•â•â•â•â• -->
<nav>
  <a class="nav-logo" onclick="showSection('home')">
    <div class="logo-icon">â­</div>
    <span class="logo-text">Star Universe</span>
  </a>
  <ul class="nav-links">
    <li><a class="active" onclick="showSection('home');setNavActive(this)">Home</a></li>
    <li><a onclick="loadSection('movie');setNavActive(this)">Movies</a></li>
    <li><a onclick="loadSection('tv');setNavActive(this)">Series</a></li>
    <li><a onclick="loadSection('trending');setNavActive(this)">Trending</a></li>
    <li><a onclick="loadSection('top_rated');setNavActive(this)">Top Rated</a></li>
  </ul>
  <div class="nav-search" onclick="openSearch()">
    <span>ğŸ”</span>
    <span>Search movies, series...</span>
    <kbd>âŒ˜K</kbd>
  </div>
  <div class="nav-actions">
    <button class="icon-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™</button>
    <button class="api-badge" onclick="changeApiKey()">ğŸ”‘ API Key</button>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â• SEARCH â•â•â•â•â•â•â•â•â•â• -->
<div id="searchModal">
  <div class="search-box">
    <span class="s-icon">ğŸ”</span>
    <input id="searchInput" placeholder="Search movies, series, anime..." oninput="handleSearch(this.value)" onkeydown="if(event.key==='Escape')closeSearch()">
    <button class="s-close" onclick="closeSearch()">âœ•</button>
  </div>
  <div id="searchResults"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• PLAYER â•â•â•â•â•â•â•â•â•â• -->
<div id="playerModal">
  <div class="player-header">
    <div class="title" id="playerTitle">Loading...</div>
    <button class="close-btn" onclick="closePlayer()">âœ• Close</button>
  </div>
  <div class="player-wrap">
    <iframe id="playerFrame" allowfullscreen allow="autoplay; fullscreen"></iframe>
  </div>
  <div id="epBar" class="ep-bar" style="display:none"></div>
  <div class="player-sources">
    <span>ğŸ¬ Server:</span>
    <button class="src-btn active" id="srv1" onclick="switchServer(1)">VidSrc</button>
    <button class="src-btn" id="srv2" onclick="switchServer(2)">2Embed</button>
    <button class="src-btn" id="srv3" onclick="switchServer(3)">VidSrc.me</button>
    <button class="src-btn" id="srv4" onclick="switchServer(4)">SuperEmbed</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• DETAIL MODAL â•â•â•â•â•â•â•â•â•â• -->
<div id="detailModal" onclick="handleDetailBg(event)">
  <div class="detail-card" id="detailCard">
    <div class="detail-backdrop" id="detailBackdrop">
      <div class="detail-backdrop-overlay"></div>
    </div>
    <button class="detail-close" onclick="closeDetail()">âœ•</button>
    <div class="detail-body">
      <div><div class="detail-poster" id="detailPoster"></div>
        <div class="season-tabs" id="seasonTabs"></div>
      </div>
      <div class="detail-info" id="detailInfo"></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• TOAST â•â•â•â•â•â•â•â•â•â• -->
<div id="toast">âœ“ <span id="toastMsg"></span></div>

<!-- â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â• -->
<main id="mainContent">

  <!-- HERO -->
  <div class="hero" id="heroSection">
    <div class="hero-bg" id="heroBg" style="background:linear-gradient(135deg,#1a0a2e,#3d1a78)"></div>
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-tag" id="heroTag">ğŸ”¥ Trending</div>
      <h1 class="hero-title" id="heroTitle">Loading...</h1>
      <div class="hero-meta" id="heroMeta"></div>
      <p class="hero-desc" id="heroDesc">Fetching latest content...</p>
      <div class="hero-btns">
        <button class="btn-primary" id="heroPlayBtn" onclick="heroPlay()">â–¶ Watch Now</button>
        <button class="btn-sec" id="heroInfoBtn" onclick="heroInfo()">â„¹ More Info</button>
      </div>
    </div>
    <div class="hero-dots" id="heroDots"></div>
  </div>

  <!-- GENRE PILLS -->
  <div class="genre-bar" id="genreBar">
    <div class="gpill active" onclick="setGenre(0,this)">All</div>
    <div class="gpill" onclick="setGenre(28,this)">âš”ï¸ Action</div>
    <div class="gpill" onclick="setGenre(27,this)">ğŸ‘» Horror</div>
    <div class="gpill" onclick="setGenre(35,this)">ğŸ˜‚ Comedy</div>
    <div class="gpill" onclick="setGenre(18,this)">ğŸ­ Drama</div>
    <div class="gpill" onclick="setGenre(878,this)">ğŸš€ Sci-Fi</div>
    <div class="gpill" onclick="setGenre(10749,this)">â¤ï¸ Romance</div>
    <div class="gpill" onclick="setGenre(14,this)">ğŸ§™ Fantasy</div>
    <div class="gpill" onclick="setGenre(53,this)">ğŸ”¥ Thriller</div>
    <div class="gpill" onclick="setGenre(16,this)">ğŸ¨ Animation</div>
    <div class="gpill" onclick="setGenre(80,this)">ğŸ”« Crime</div>
    <div class="gpill" onclick="setGenre(99,this)">ğŸ“½ï¸ Documentary</div>
  </div>

  <!-- SECTIONS LOADED DYNAMICALLY -->
  <div id="sectionsContainer"></div>

</main>

<!-- MOBILE BAR -->
<div class="mobile-bar">
  <button class="m-btn active" onclick="showSection('home');setMobileActive(this)"><span>ğŸ </span>Home</button>
  <button class="m-btn" onclick="loadSection('movie');setMobileActive(this)"><span>ğŸ¬</span>Movies</button>
  <button class="m-btn" onclick="openSearch()"><span>ğŸ”</span>Search</button>
  <button class="m-btn" onclick="loadSection('tv');setMobileActive(this)"><span>ğŸ“º</span>Series</button>
  <button class="m-btn" onclick="loadSection('trending');setMobileActive(this)"><span>ğŸ”¥</span>Trending</button>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div>
      <div class="footer-logo">
        <div class="logo-icon" style="width:32px;height:32px;font-size:.95rem">â­</div>
        <span class="logo-text" style="font-size:1.2rem">Star Universe</span>
      </div>
      <p class="footer-desc">Your premier hub for streaming movies, TV shows, anime & cartoons â€” all in one place.</p>
      <div class="footer-notice">âš ï¸ We do not host any files. All content is indexed from third-party sources. We are not responsible for external content.</div>
    </div>
    <div class="footer-col">
      <h4>Browse</h4>
      <ul class="footer-links">
        <li><a onclick="loadSection('movie')">Movies</a></li>
        <li><a onclick="loadSection('tv')">Web Series</a></li>
        <li><a onclick="loadSection('trending')">Trending</a></li>
        <li><a onclick="loadSection('top_rated')">Top Rated</a></li>
        <li><a onclick="setGenre(16,document.querySelector('.gpill'))">Anime</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Genre</h4>
      <ul class="footer-links">
        <li><a onclick="setGenre(28,null)">Action</a></li>
        <li><a onclick="setGenre(27,null)">Horror</a></li>
        <li><a onclick="setGenre(35,null)">Comedy</a></li>
        <li><a onclick="setGenre(878,null)">Sci-Fi</a></li>
        <li><a onclick="setGenre(53,null)">Thriller</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Company</h4>
      <ul class="footer-links">
        <li><a>About Us</a></li>
        <li><a>Contact</a></li>
        <li><a>DMCA</a></li>
        <li><a>Privacy Policy</a></li>
        <li><a>Disclaimer</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Â© 2024â€“2026 Star Universe. Powered by TMDB.</span>
    <span>Made with ğŸ’œ for movie lovers</span>
  </div>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONFIG â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TMDB_IMG = 'https://image.tmdb.org/t/p/';
let API_KEY = '';
let heroItems = [];
let heroIdx = 0;
let heroTimer;
let currentItem = null;
let currentSeason = 1;
let currentEp = 1;
let activeServer = 1;
let searchTimer;

// Demo data fallback
const DEMO_ITEMS = [
  {id:299534,title:"Avengers: Endgame",media_type:"movie",vote_average:8.3,release_date:"2019-04-26",overview:"After the devastating events of Avengers: Infinity War, the universe is in ruins.",genre_ids:[12,878,14]},
  {id:634649,title:"Spider-Man: No Way Home",media_type:"movie",vote_average:7.9,release_date:"2021-12-17",overview:"Peter Parker is unmasked and can no longer separate his normal life from his superhero life.",genre_ids:[28,12,878]},
  {id:1396,name:"Breaking Bad",title:"Breaking Bad",media_type:"tv",vote_average:9.5,first_air_date:"2008-01-20",overview:"A high school chemistry teacher diagnosed with cancer turns to manufacturing drugs to secure his family's future.",genre_ids:[18,80]},
  {id:1399,name:"Game of Thrones",title:"Game of Thrones",media_type:"tv",vote_average:8.4,first_air_date:"2011-04-17",overview:"Noble families vie for control of the Iron Throne while an ancient threat rises from the North.",genre_ids:[18,14,28]},
  {id:238,title:"The Godfather",media_type:"movie",vote_average:8.7,release_date:"1972-03-24",overview:"The aging patriarch of an organized crime dynasty transfers control to his reluctant son.",genre_ids:[18,80]},
  {id:157336,title:"Interstellar",media_type:"movie",vote_average:8.4,release_date:"2014-11-07",overview:"A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",genre_ids:[12,18,878]},
  {id:680,title:"Pulp Fiction",media_type:"movie",vote_average:8.5,release_date:"1994-10-14",overview:"The lives of two mob hitmen, a boxer, a gangster and his wife intertwine in four tales of violence.",genre_ids:[53,80]},
  {id:84958,name:"Loki",title:"Loki",media_type:"tv",vote_average:8.2,first_air_date:"2021-06-09",overview:"The mercurial villain Loki resumes his role as the God of Mischief in a new series.",genre_ids:[28,12,878]},
  {id:1402,name:"The Walking Dead",title:"The Walking Dead",media_type:"tv",vote_average:7.9,first_air_date:"2010-10-31",overview:"Sheriff Deputy Rick Grimes leads a group of survivors in a world overrun by zombies.",genre_ids:[18,27]},
  {id:19404,title:"Dilwale Dulhania Le Jayenge",media_type:"movie",vote_average:8.1,release_date:"1995-10-20",overview:"A young man and woman fall in love on a trip through Europe, but the woman's father has arranged her marriage to someone else.",genre_ids:[10749,18]},
  {id:120,title:"The Lord of the Rings: The Fellowship of the Ring",media_type:"movie",vote_average:8.4,release_date:"2001-12-19",overview:"A meek Hobbit from the Shire and eight companions set out on a journey to destroy the powerful One Ring.",genre_ids:[12,14,28]},
  {id:62286,name:"Fear the Walking Dead",title:"Fear the Walking Dead",media_type:"tv",vote_average:7.1,first_air_date:"2015-08-23",overview:"Set in the same universe as The Walking Dead, the story begins the day the world ends.",genre_ids:[18,27,80]},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• API FUNCTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function tmdb(endpoint, params='') {
  if(!API_KEY) return null;
  const url = `https://api.themoviedb.org/3${endpoint}?api_key=${API_KEY}&language=en-US${params}`;
  try{
    const res = await fetch(url);
    if(!res.ok) return null;
    return await res.json();
  }catch(e){ return null; }
}

function imgUrl(path, size='w500') {
  if(!path) return '';
  return TMDB_IMG + size + path;
}

function getTitle(item){ return item.title || item.name || 'Unknown'; }
function getYear(item){ return (item.release_date || item.first_air_date || '').slice(0,4) || ''; }
function getType(item){ return item.media_type === 'tv' || item.number_of_seasons ? 'TV' : 'MOVIE'; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• API KEY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function saveApiKey() {
  const key = document.getElementById('apiKeyInput').value.trim();
  if(!key){ showToast('Please enter API key!'); return; }
  API_KEY = key;
  document.getElementById('apiModal').classList.remove('open');
  initSite();
}

function useDemoMode() {
  API_KEY = '';
  document.getElementById('apiModal').classList.remove('open');
  initDemoMode();
}

function changeApiKey() {
  document.getElementById('apiKeyInput').value = API_KEY;
  document.getElementById('apiModal').classList.add('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function initSite() {
  showToast('ğŸš€ Loading Star Universe...');
  await buildHero();
  await buildHomeSections();
}

function initDemoMode() {
  showToast('ğŸ“¦ Demo Mode â€” Real movies data!');
  buildDemoHero();
  buildDemoSections();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function buildHero() {
  const data = await tmdb('/trending/all/week');
  if(!data) { buildDemoHero(); return; }
  heroItems = data.results.slice(0,6).filter(i=>i.backdrop_path);
  renderHero();
}

function buildDemoHero() {
  heroItems = DEMO_ITEMS.slice(0,5);
  renderHero();
}

function renderHero() {
  if(!heroItems.length) return;
  const item = heroItems[heroIdx];
  const title = getTitle(item);
  const year = getYear(item);
  const rating = item.vote_average?.toFixed(1)||'N/A';

  document.getElementById('heroTitle').textContent = title;
  document.getElementById('heroDesc').textContent = item.overview || '';
  document.getElementById('heroMeta').innerHTML = `
    <span class="hero-rating">â­ ${rating}</span>
    <span>ğŸ“… ${year}</span>
    <span>${getType(item)==='TV'?'ğŸ“º Series':'ğŸ¬ Movie'}</span>
    ${item.adult?'':`<span style="color:var(--green)">âœ“ Available</span>`}
  `;
  document.getElementById('heroTag').textContent = getType(item)==='TV'?'ğŸ“º Series':'ğŸ”¥ Trending Movie';

  if(item.backdrop_path) {
    document.getElementById('heroBg').style.cssText = `
      background:url(${imgUrl(item.backdrop_path,'original')}) center/cover no-repeat;
      position:absolute;inset:0;transition:all 1s ease;
    `;
  }

  // dots
  const dots = document.getElementById('heroDots');
  dots.innerHTML = heroItems.map((_,i)=>`<div class="hdot${i===heroIdx?' active':''}" onclick="goHero(${i})"></div>`).join('');

  clearInterval(heroTimer);
  heroTimer = setInterval(()=>goHero((heroIdx+1)%heroItems.length), 6000);
}

function goHero(i) { heroIdx=i; renderHero(); }
function heroPlay() { if(heroItems[heroIdx]) playItem(heroItems[heroIdx]); }
function heroInfo() { if(heroItems[heroIdx]) openDetail(heroItems[heroIdx]); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BUILD HOME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function buildHomeSections() {
  const container = document.getElementById('sectionsContainer');
  container.innerHTML = '';

  const sections = [
    {title:'ğŸ”¥ Trending This Week', endpoint:'/trending/all/week'},
    {title:'ğŸ¬ Popular Movies', endpoint:'/movie/popular'},
    {title:'ğŸ“º Popular Series', endpoint:'/tv/popular'},
    {title:'â­ Top Rated Movies', endpoint:'/movie/top_rated'},
    {title:'ğŸŒŸ Top Rated Series', endpoint:'/tv/top_rated'},
    {title:'ğŸ†• Now Playing', endpoint:'/movie/now_playing'},
    {title:'ğŸ“¡ On Air Series', endpoint:'/tv/on_the_air'},
  ];

  for(const s of sections) {
    const sec = createSkeletonSection(s.title);
    container.appendChild(sec);
    const data = await tmdb(s.endpoint);
    if(data) fillSection(sec, data.results, s.title);
    else fillDemoSection(sec, s.title);
  }
  appendFooterToMain();
}

function buildDemoSections() {
  const container = document.getElementById('sectionsContainer');
  container.innerHTML = '';
  const sections = ['ğŸ”¥ Trending','ğŸ¬ Popular Movies','ğŸ“º Popular Series','â­ Top Rated'];
  sections.forEach(t=>{
    const sec = createSkeletonSection(t);
    container.appendChild(sec);
    fillSection(sec, DEMO_ITEMS, t);
  });
  appendFooterToMain();
}

function appendFooterToMain() {
  // footer already in HTML
}

function createSkeletonSection(title) {
  const div = document.createElement('div');
  div.className = 'section';
  div.innerHTML = `
    <div class="section-hdr">
      <h2 class="section-title">${title}</h2>
      <a class="see-all">See All â†’</a>
    </div>
    <div class="scroll-wrap">
      <button class="scroll-arrow l" onclick="scrollRow(this,-1)">â—€</button>
      <div class="scroll-row">
        ${Array(6).fill(0).map(()=>`
          <div class="skel-card" style="flex:0 0 160px">
            <div class="skel-thumb skeleton"></div>
            <div class="skel-line skeleton"></div>
            <div class="skel-line short skeleton"></div>
          </div>`).join('')}
      </div>
      <button class="scroll-arrow r" onclick="scrollRow(this,1)">â–¶</button>
    </div>
  `;
  return div;
}

function fillSection(secEl, items, title) {
  const row = secEl.querySelector('.scroll-row');
  row.innerHTML = '';
  items.slice(0,20).forEach(item => row.appendChild(makeCard(item)));
}

function fillDemoSection(secEl, title) { fillSection(secEl, DEMO_ITEMS, title); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function makeCard(item) {
  const div = document.createElement('div');
  div.className = 'movie-card';
  div.onclick = () => openDetail(item);

  const title = getTitle(item);
  const year = getYear(item);
  const rating = item.vote_average?.toFixed(1)||'';
  const isTV = getType(item)==='TV';
  const poster = item.poster_path ? imgUrl(item.poster_path,'w342') : '';

  div.innerHTML = `
    <div class="card-thumb">
      ${poster
        ? `<img src="${poster}" alt="${title}" loading="lazy" onerror="this.parentNode.innerHTML='<div class=placeholder>ğŸ¬</div>'">`
        : `<div class="placeholder">ğŸ¬</div>`}
      <div class="card-badge cb-hd">HD</div>
      ${isTV?`<div class="card-badge cb-tv" style="top:.45rem;left:auto;right:.45rem">TV</div>`:''}
      ${rating?`<div class="card-rating">â­ ${rating}</div>`:''}
      <div class="card-overlay">
        <div class="play-circle">â–¶</div>
      </div>
    </div>
    <div class="card-info">
      <div class="card-title">${title}</div>
      <div class="card-sub">
        <span class="card-type">${isTV?'SERIES':'MOVIE'}</span>
        <span>${year}</span>
      </div>
    </div>
  `;
  return div;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCROLL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function scrollRow(btn, dir) {
  const row = btn.closest('.scroll-wrap').querySelector('.scroll-row');
  row.scrollBy({left: dir * 640, behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DETAIL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function openDetail(item) {
  currentItem = item;
  document.getElementById('detailModal').classList.add('open');
  document.body.style.overflow = 'hidden';

  // Backdrop
  const backdrop = document.getElementById('detailBackdrop');
  if(item.backdrop_path) {
    backdrop.innerHTML = `<img src="${imgUrl(item.backdrop_path,'w1280')}" alt=""><div class="detail-backdrop-overlay"></div>`;
  } else {
    backdrop.innerHTML = `<div style="width:100%;height:100%;background:linear-gradient(135deg,var(--p1),#1a0a2e);display:flex;align-items:center;justify-content:center;font-size:5rem;opacity:.3">ğŸ¬</div><div class="detail-backdrop-overlay"></div>`;
  }
  backdrop.innerHTML += `<button class="detail-close" onclick="closeDetail()">âœ•</button>`;

  // Poster
  const poster = document.getElementById('detailPoster');
  poster.innerHTML = item.poster_path
    ? `<img src="${imgUrl(item.poster_path,'w342')}" alt="${getTitle(item)}">`
    : `<div style="aspect-ratio:2/3;display:flex;align-items:center;justify-content:center;font-size:3rem;background:linear-gradient(135deg,var(--p1),#1a0a2e);border-radius:14px">ğŸ¬</div>`;

  // Info
  const isTV = getType(item)==='TV';
  const title = getTitle(item);
  const year = getYear(item);
  const rating = item.vote_average?.toFixed(1)||'N/A';

  document.getElementById('detailInfo').innerHTML = `
    <div style="display:flex;gap:.4rem;flex-wrap:wrap;margin-bottom:.6rem">
      <span class="meta-tag">${isTV?'TV Series':'Movie'}</span>
      <span class="meta-tag">${year}</span>
      <span class="meta-tag" style="color:var(--gold)">â­ ${rating}</span>
    </div>
    <h1 style="font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:800;margin-bottom:.6rem;line-height:1.2">${title}</h1>
    <p style="color:var(--t2);font-size:.85rem;line-height:1.7;margin-bottom:1.2rem">${item.overview||'No description available.'}</p>
    <div style="display:flex;gap:.6rem;flex-wrap:wrap" id="detailBtns">
      <button class="btn-primary" onclick="playItem(currentItem)">â–¶ Watch Now</button>
      <button class="btn-sec" onclick="addWatchlist()">+ Watchlist</button>
      <button class="btn-sec" onclick="shareItem()">â†— Share</button>
    </div>
    <div id="detailExtra" style="margin-top:1rem;font-size:.8rem;color:var(--t3)">Loading details...</div>
  `;

  // Season tabs for TV
  const seasonTabs = document.getElementById('seasonTabs');
  seasonTabs.innerHTML = '';
  if(isTV && API_KEY) {
    const details = await tmdb(`/tv/${item.id}`);
    if(details && details.number_of_seasons) {
      currentSeason = 1;
      seasonTabs.innerHTML = '<div style="font-size:.72rem;color:var(--t3);margin-top:.75rem;margin-bottom:.4rem;font-weight:700">SEASON</div>';
      for(let s=1;s<=details.number_of_seasons;s++) {
        const btn = document.createElement('button');
        btn.className='season-tab'+(s===1?' active':'');
        btn.textContent = 'S'+s;
        btn.onclick = ()=>{ currentSeason=s; document.querySelectorAll('.season-tab').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); };
        seasonTabs.appendChild(btn);
      }
      document.getElementById('detailExtra').textContent = `${details.number_of_seasons} Season${details.number_of_seasons>1?'s':''} Â· ${details.number_of_episodes} Episodes`;
    }
  } else {
    document.getElementById('detailExtra').textContent = '';
  }
}

function closeDetail() {
  document.getElementById('detailModal').classList.remove('open');
  document.body.style.overflow = '';
}

function handleDetailBg(e) {
  if(e.target===document.getElementById('detailModal')) closeDetail();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PLAYER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function playItem(item) {
  currentItem = item;
  const title = getTitle(item);
  const isTV = getType(item)==='TV';

  document.getElementById('playerTitle').textContent = title;
  document.getElementById('playerModal').classList.add('open');
  document.body.style.overflow = 'hidden';
  closeDetail();

  // Episode bar for TV
  const epBar = document.getElementById('epBar');
  if(isTV) {
    epBar.style.display = 'flex';
    epBar.innerHTML = '<span style="font-size:.72rem;color:var(--t3);flex-shrink:0;align-self:center">Episode:</span>';
    for(let e=1;e<=20;e++) {
      const b = document.createElement('button');
      b.className='ep-btn'+(e===1?' active':'');
      b.textContent='E'+e;
      b.onclick=()=>{
        currentEp=e;
        document.querySelectorAll('.ep-btn').forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
        loadServer(activeServer);
      };
      epBar.appendChild(b);
    }
  } else {
    epBar.style.display = 'none';
  }

  activeServer = 1;
  document.querySelectorAll('.src-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('srv1').classList.add('active');
  loadServer(1);
}

function loadServer(num) {
  const item = currentItem;
  if(!item) return;
  const id = item.id;
  const isTV = getType(item)==='TV';
  const s = currentSeason, e = currentEp;
  let src = '';

  if(num===1) src = isTV ? `https://vidsrc.to/embed/tv/${id}/${s}/${e}` : `https://vidsrc.to/embed/movie/${id}`;
  else if(num===2) src = isTV ? `https://www.2embed.cc/embedtv/${id}&s=${s}&e=${e}` : `https://www.2embed.cc/embed/${id}`;
  else if(num===3) src = isTV ? `https://vidsrc.me/embed/tv?tmdb=${id}&season=${s}&episode=${e}` : `https://vidsrc.me/embed/movie?tmdb=${id}`;
  else if(num===4) src = isTV ? `https://multiembed.mov/?video_id=${id}&tmdb=1&s=${s}&e=${e}` : `https://multiembed.mov/?video_id=${id}&tmdb=1`;

  document.getElementById('playerFrame').src = src;
  activeServer = num;
}

function switchServer(num) {
  document.querySelectorAll('.src-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('srv'+num).classList.add('active');
  loadServer(num);
  showToast('ğŸ¬ Switching to Server '+num+'...');
}

function closePlayer() {
  document.getElementById('playerModal').classList.remove('open');
  document.getElementById('playerFrame').src = '';
  document.body.style.overflow = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SEARCH â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openSearch() {
  document.getElementById('searchModal').classList.add('open');
  setTimeout(()=>document.getElementById('searchInput').focus(),100);
  document.body.style.overflow='hidden';
}

function closeSearch() {
  document.getElementById('searchModal').classList.remove('open');
  document.getElementById('searchInput').value='';
  document.getElementById('searchResults').innerHTML='';
  document.body.style.overflow='';
}

function handleSearch(q) {
  clearTimeout(searchTimer);
  if(!q.trim()) { document.getElementById('searchResults').innerHTML=''; return; }
  document.getElementById('searchResults').innerHTML = '<div class="search-loading">ğŸ” Searching...</div>';
  searchTimer = setTimeout(()=>doSearch(q), 400);
}

async function doSearch(q) {
  const res = document.getElementById('searchResults');
  if(API_KEY) {
    const data = await tmdb('/search/multi', `&query=${encodeURIComponent(q)}`);
    if(data && data.results.length) {
      res.innerHTML = data.results.slice(0,8).map(item=>{
        const poster = item.poster_path ? imgUrl(item.poster_path,'w92') : '';
        const title = getTitle(item);
        const year = getYear(item);
        const rating = item.vote_average?.toFixed(1)||'';
        return `<div class="search-item" onclick="closeSearch();openDetail(${JSON.stringify(item).replace(/"/g,'&quot;')})">
          ${poster?`<img src="${poster}" alt="${title}">`:`<div style="width:44px;height:58px;border-radius:7px;background:var(--bg2);display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0">ğŸ¬</div>`}
          <div class="search-item-info">
            <div class="title">${title}</div>
            <div class="meta">${getType(item)} Â· ${year}${rating?` Â· â­${rating}`:''}</div>
          </div>
        </div>`;
      }).join('');
    } else {
      res.innerHTML = `<div class="search-loading" style="color:var(--t3)">No results found for "${q}"</div>`;
    }
  } else {
    // Demo search
    const matches = DEMO_ITEMS.filter(i=>getTitle(i).toLowerCase().includes(q.toLowerCase()));
    if(matches.length) {
      res.innerHTML = matches.slice(0,8).map(item=>`
        <div class="search-item" onclick="closeSearch();openDetail(${JSON.stringify(item).replace(/"/g,'&quot;')})">
          <div style="width:44px;height:58px;border-radius:7px;background:linear-gradient(135deg,var(--p1),#1a0a2e);display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0">ğŸ¬</div>
          <div class="search-item-info">
            <div class="title">${getTitle(item)}</div>
            <div class="meta">${getType(item)} Â· ${getYear(item)} Â· â­${item.vote_average}</div>
          </div>
        </div>`).join('');
    } else {
      res.innerHTML = `<div class="search-loading" style="color:var(--t3)">No results for "${q}"</div>`;
    }
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOAD SECTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadSection(type) {
  const container = document.getElementById('sectionsContainer');
  container.innerHTML = '';
  document.getElementById('heroSection').style.display='none';
  document.getElementById('genreBar').style.display='none';
  window.scrollTo({top:0,behavior:'smooth'});

  let endpoints = [];
  if(type==='movie') endpoints=[{t:'ğŸ¬ Popular Movies',e:'/movie/popular'},{t:'ğŸ†• Now Playing',e:'/movie/now_playing'},{t:'â­ Top Rated',e:'/movie/top_rated'},{t:'ğŸ”œ Upcoming',e:'/movie/upcoming'}];
  else if(type==='tv') endpoints=[{t:'ğŸ“º Popular Series',e:'/tv/popular'},{t:'ğŸ“¡ On Air',e:'/tv/on_the_air'},{t:'â­ Top Rated Series',e:'/tv/top_rated'},{t:'ğŸŒŸ Airing Today',e:'/tv/airing_today'}];
  else if(type==='trending') endpoints=[{t:'ğŸ”¥ Trending Today',e:'/trending/all/day'},{t:'ğŸ“ˆ Trending This Week',e:'/trending/all/week'},{t:'ğŸ¬ Trending Movies',e:'/trending/movie/week'},{t:'ğŸ“º Trending Series',e:'/trending/tv/week'}];
  else if(type==='top_rated') endpoints=[{t:'ğŸ† Top Movies',e:'/movie/top_rated'},{t:'ğŸ† Top Series',e:'/tv/top_rated'}];

  const backBtn = document.createElement('div');
  backBtn.style.cssText='padding:1.5rem 2.5rem .5rem;';
  backBtn.innerHTML=`<button onclick="showSection('home')" style="background:var(--glass2);border:1px solid var(--border);color:var(--t2);padding:.5rem 1rem;border-radius:10px;font-size:.82rem;cursor:pointer;font-family:Outfit,sans-serif;transition:all .2s">â† Back to Home</button>`;
  container.appendChild(backBtn);

  for(const ep of endpoints) {
    const sec = createSkeletonSection(ep.t);
    container.appendChild(sec);
    if(API_KEY) {
      const data = await tmdb(ep.e);
      if(data) fillSection(sec, data.results, ep.t);
      else fillDemoSection(sec, ep.t);
    } else fillDemoSection(sec, ep.t);
  }
}

function showSection(name) {
  if(name==='home') {
    document.getElementById('sectionsContainer').innerHTML='';
    document.getElementById('heroSection').style.display='block';
    document.getElementById('genreBar').style.display='flex';
    if(API_KEY) buildHomeSections();
    else buildDemoSections();
    window.scrollTo({top:0,behavior:'smooth'});
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GENRE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function setGenre(genreId, el) {
  if(el) {
    document.querySelectorAll('.gpill').forEach(p=>p.classList.remove('active'));
    el.classList.add('active');
  }
  if(genreId===0) { showSection('home'); return; }

  const container = document.getElementById('sectionsContainer');
  container.innerHTML='';
  document.getElementById('heroSection').style.display='none';

  const sec = createSkeletonSection('ğŸ­ Genre Results');
  container.appendChild(sec);

  if(API_KEY) {
    const [movies, series] = await Promise.all([
      tmdb('/discover/movie', `&with_genres=${genreId}&sort_by=popularity.desc`),
      tmdb('/discover/tv', `&with_genres=${genreId}&sort_by=popularity.desc`)
    ]);
    if(movies) {
      fillSection(sec, movies.results, 'ğŸ¬ Movies');
      const sec2 = createSkeletonSection('ğŸ“º Series');
      container.appendChild(sec2);
      if(series) fillSection(sec2, series.results, 'ğŸ“º Series');
    } else fillDemoSection(sec, 'Results');
  } else {
    fillDemoSection(sec, 'Genre Results');
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MISC â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleTheme() {
  const t = document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';
  document.documentElement.setAttribute('data-theme',t);
  document.getElementById('themeBtn').textContent = t==='dark'?'ğŸŒ™':'â˜€ï¸';
}

function setNavActive(el) {
  document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'));
  el.classList.add('active');
}

function setMobileActive(el) {
  document.querySelectorAll('.m-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
}

function addWatchlist() { showToast('Added to Watchlist âœ“'); closeDetail(); }
function shareItem() {
  const t = currentItem ? getTitle(currentItem) : '';
  if(navigator.clipboard) navigator.clipboard.writeText('Watch "'+t+'" on Star Universe!');
  showToast('Link copied! âœ“');
}

function showToast(msg) {
  document.getElementById('toastMsg').textContent = msg;
  const t = document.getElementById('toast');
  t.classList.add('show');
  clearTimeout(t._t);
  t._t = setTimeout(()=>t.classList.remove('show'), 2800);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• KEYBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('keydown', e=>{
  if((e.metaKey||e.ctrlKey)&&e.key==='k'){e.preventDefault();openSearch()}
  if(e.key==='Escape'){closeSearch();closeDetail();closePlayer()}
});
</script>
</body>
</html>
